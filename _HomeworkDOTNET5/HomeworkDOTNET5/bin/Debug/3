<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Movable Type  5.2.2" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!--link rel="stylesheet" href="http://www.ruanyifeng.com/blog/styles.css" type="text/css" /-->
<link rel="start" href="http://www.ruanyifeng.com/blog/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="http://feeds.feedburner.com/ruanyifeng" />
<script type="text/javascript" src="http://www.ruanyifeng.com/blog/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://www.ruanyifeng.com/blog/2014/05/restful_api.html">
<dc:title>RESTful API 设计指南</dc:title>
<dc:description>网络应用程序，分为前端和后端两个部分。当前的发展趋势，就是前端设备层出不穷（手机、平板、桌面电脑、其他专用设备......）。...</dc:description>
<dc:creator>阮一峰</dc:creator>
<dc:date>2014-05-22T20:54:31+08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->

<style>
body {
  background-color: #f5f5d5;
}

#container::before {
  display: block;
  width: 100%;
  padding: 10px;
  background: rgba(0,0,0,0.1);
  text-align: center;
  content: "本站显示不正常，可能因为您使用了广告拦截器。";
}

</style>
<script>
function loadjscssfile(filename, filetype){
    if (filetype=="js"){ //if filename is a external JavaScript file
        var fileref=document.createElement('script')
        fileref.setAttribute("type","text/javascript")
        fileref.setAttribute("src", filename)
    }
    else if (filetype=="css"){ //if filename is an external CSS file
        var fileref=document.createElement("link")
        fileref.setAttribute("rel", "stylesheet")
        fileref.setAttribute("type", "text/css")
        fileref.setAttribute("href", filename)
    }
    if (typeof fileref!="undefined")
        document.getElementsByTagName("head")[0].appendChild(fileref)
}
//loadjscssfile("http://www.ruanyifeng.com/blog/styles.css", "css");
loadjscssfile('/static/themes/theme_scrapbook/theme_scrapbook.min.css', "css");


function checker() {
// var img = document.querySelector('img[src^="http://www.ruanyifeng.com/blog/images"]');
var img = document.querySelector('a > img[src*="wangbase.com/blogimg/asset/"]');
  if (img && window.getComputedStyle(img).display === 'none'){
    var sponsor = document.querySelector('.entry-sponsor');
    var prompt = document.createElement('div');
    prompt.style = 'border: 1px solid #c6c6c6;border-radius: 4px;background-color: #f5f2f0;padding: 15px; font-size: 14px;';
  prompt.innerHTML = '<p>您使用了广告拦截器，导致本站内容无法显示。</p><p>请将 www.ruanyifeng.com 加入白名单，解除广告屏蔽后，刷新页面。谢谢。</p>';
    sponsor.parentNode.replaceChild(prompt, sponsor);
    document.querySelector('#main-content').innerHTML = '';
  }
}

setTimeout(checker, 1000);
</script>

    
    <link rel="prev" href="http://www.ruanyifeng.com/blog/2014/04/ecmascript_6_primer.html" title="《ECMAScript 6入门》上线了" />
    <link rel="next" href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" title="RESTful API 设计指南" />
    
    <title>理解OAuth 2.0 - 阮一峰的网络日志</title>
</head>
<body id="scrapbook" class="mt-entry-archive one-column">
<script>
if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) document.body.classList.add('mobile');

/*
window.addEventListener('load', function(event) {
  setTimeout(function () {
    hab('#sup-post-2');
    hab('#cre-inner');
  }, 1000);
});
*/
</script>
    <div id="container">
        <div id="container-inner">

            <div id="header">
    <div id="header-inner">
        <div id="header-content">


            <div id="header-name">阮一峰的网络日志 <span id="site_location"> » <a href="http://www.ruanyifeng.com/blog/" accesskey="1">首页</a></span><span id="site_archive"> » <a href="http://www.ruanyifeng.com/blog/archives.html">档案</a></span>
</div>

<div id="google_search">
<!-- SiteSearch Google -->
<form action="https://www.baidu.com/s" target="_blank" method="get" id="cse-search-box">
  <div>
  <input type="text" size="20" name="origin" class="searchbox" id="sbi" value="" />
  <input type="hidden" name="wd" value="" />
  <!--input type="image" src="/static/themes/theme_scrapbook/images/top_search_submit.gif" class="searchbox_submit" value="" alt="搜索" name="sa" onclick="this.form.wd.value = this.form.origin.value + ' inurl:www.ruanyifeng.com/blog'" /-->
  <input type="image" src="/static/themes/theme_scrapbook/images/top_search_submit.gif" class="searchbox_submit" value="" alt="搜索" name="sa" onclick="this.form.wd.value = this.form.origin.value + ' 阮一峰'" />
</div>
</form>

<!-- SiteSearch Google -->
</div>
<div id="feed_icon">
<a href="/feed.html" title="订阅Feed">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAUzSURBVHjavFdbbFRVFF3nPjoz7dTWTittaW0jUDRAUqaNojyqREnEQKgfUj9MqqAmhqRt/OCD4CuY+Kckoh+aiGKC+gMJbdHoRysJ8dkhhmJLNdDKtJU+6GMK87j3Hs85d2Z6HzNtMYWb3Dn3NWftvfba+5xNYDl+e6Fkj6yqb/oDRbWq14vlPBLRKCITkxf0ROLt+hNjp1PPSRK4kA3vF1dXNRcWlyA2OQU9eos9opAkAiKxD+XkKO6t15aRWO7J/MgmAZU8MEgexgZHMX518Dh72sYMmVKShnxWuWHdHtxKIDIYTgMuDzgfmSOIQkYMpdUF8OY92Hytt4/jvkg47czzU16iQovM3QFwmNck+Yyduu7D6NA0Z6JR4THntFs9V4tWQg6Ui3s6MwKDncsFTnXKLJhDSeUK3AgPtyhccDzmVs999buRt/1Vm4i0od+hX7+MRG87jPGB/w1u8FPj9xEw7McVrnYuOCvtpjTth3J/nTg99c8LRhKhr6D3dTB5R24bXFwbMXBsyZzeoXaycEpJ95TB09AGX/NpqLVNtw8urnVzLvHjFNxiFqRy2OOHuqUVnue+ACkoWzo4O6lGzTmuHq6nPvY2m9rVqjrIK2rMEKxqyG5NPAKt+wjo0LklgfNxJkZMA3KJvqRUk3z5UFY3QH14P0h+WUY79HPvgv7VuSg4ZRGY1YgZgqXmORccF17sy2ehnf9AeO085K2HQFbtXBScj0LcpgF2cN+WV+DZ/LJQu6gD4R7oV7pBJwbSgtMvfiPoVp56DySwxm7EtkMs1WdAB7qzggsDJKQYsHucSkOudrkiCPWR/fA2nYCn8SNIK4NptSMyAu3sAdDRkIsJdfth0LzSrODUoPNZ4KI9SxJI5UHk7D4GdQfz2us31c7CoHMjRkKuDPHseCMrONVhNcDJwMJpKFVvg9L4OaTiNWm1x789KCqkrXhVBiEz0WYCT2nAzQAD1/vaETv1GrRfP4Vx5cfMNcDPwvP0h0DhanPym7OIf/+O67vcJ1/PCJ4KgdzaUP6Wz+dU+5yIL6fV+PsHGAOdwlPpvvUOyeeAVGyCdqkDNB6DPjsBSrnndfOGevOh3RhGItxvA+fX1CtbGFhgYUFkFMZPR6F1HnClHq8HyubWtJexX06CRmdt33hrd7nA7SFY4qoGpnYuOKcRykPPgDCBcsHx9Iv+fNL2PueBehCWUfYQIIMGLOCcOmXDXsh1+yCt35tUPfvzGFuSvzvoinXOxqa02qOhM6733nVP2MAdaej2XN11DPKjLZCD+yBvahGCo7JfTKAN9UD7s8Oe9zUNIhz8fWI8DG2k38WCFdxugANcXrvTVd1IEbuv3Jour7Hzn7jLMBNfKs7R3i67gRVrbeCOEDhinmWhAatsqdquM2XzHZINhK2cqTjHr/XZdVJUbgN3MWAVXKbSyg9jesRW2xP9di+lwrL5ojM3m2H/kG9hwcIA37c71W6wJdW2J2S5nrjYbq/t1AHAhJsKQeyfPvf6IMJgghPJhFZ4x0KlfLFvt22du45Au/A1SOlGc0P672XXwhLtOcM0kTTEMMd0qkVmMNXxMd/tsedUjInr4SQDgOfeXMSiN0FCL5WHah4L1qqYXPJOJlttd+a5M+YpcG5poLYKQ5f+6JJ4r8bbJYP47hq4r7QAs9PjYNhHJd4o8l5taiwuOpa7AS4XKqI/5NjJbTnaWK92nLdLuhQAJayRNMiygXPBeQN+Qbvu0zDc3y+aUzhbkGR73sI7ljvUnndx2q3t+X8CDAD66FtrIL864AAAAABJRU5ErkJggg==" alt="" style="border: 0pt none;" />
</a></div>

        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1804" class="entry-asset asset hentry">
                                <div class="asset-header">
<div class="asset-nav entry-nav">

<div class="entry-location">
<ul>
<li>上一篇：<a href="http://www.ruanyifeng.com/blog/2014/04/ecmascript_6_primer.html" title="《ECMAScript 6入门》上线了">《ECMAScript</a></li>
<li>下一篇：<a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" title="RESTful API 设计指南">RESTful&nbsp;API</a></li>
</ul>
</div>


    
                                    <div class="entry-categories">
                                        <p>分类<span class="delimiter">：</span></p>
                                        <ul>
                                            <li><a href="http://www.ruanyifeng.com/blog/developer/" rel="tag">开发者手册</a></li>
                                        </ul>
                                    </div>
    


                                            
<div class="entry-location-mobile" style="float: right;">
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2014/04/ecmascript_6_primer.html" title="《ECMAScript 6入门》上线了">⇐&nbsp;</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" title="RESTful API 设计指南">&nbsp;⇒</a></li>
</ul>
</div>

</div>
</div>

                          
<article class="hentry">
                                    <h1 id="page-title" class="asset-name entry-title">理解OAuth 2.0</h1>
                                            <div id="share_button" class="social-share" style="float:right;padding-right:2em;padding-top:1em;"></div>

<div class="asset-meta">
                                        

                                            <p class="vcard author">作者： <a class="fn url" href="http://www.ruanyifeng.com">阮一峰</a></p>
                                    <p>日期： <a href="http://www.ruanyifeng.com/blog/2014/05/"><abbr class="published" title="2014-05-12T21:07:52+08:00">2014年5月12日</abbr></a></p>


</div>








                                
                                <div class="asset-content entry-content" id="main-content">

                                    <!-- div class="asset-body" -->
                                        <p><a href="http://en.wikipedia.org/wiki/OAuth">OAuth</a>是一个关于授权（authorization）的开放网络标准，在全世界得到广泛应用，目前的版本是2.0版。</p>

                                    <!-- /div -->


                                    <!-- div id="more" class="asset-more" -->
                                        <p>本文对OAuth 2.0的设计思路和运行流程，做一个简明通俗的解释，主要参考材料为<a href="http://www.rfcreader.com/#rfc6749">RFC 6749</a>。</p>

<p><img src="/blogimg/asset/2014/bg2014051201.png" alt="OAuth Logo" title="" /></p>

<blockquote>
  <p>更新：我后来又写了一组三篇的<a href="http://www.ruanyifeng.com/blog/2019/04/oauth_design.html"> 《OAuth 2.0 教程》</a>，更加通俗，并带有代码实例，欢迎阅读。</p>
</blockquote>

<h2>一、应用场景</h2>

<p>为了理解OAuth的适用场合，让我举一个假设的例子。</p>

<p>有一个"云冲印"的网站，可以将用户储存在Google的照片，冲印出来。用户为了使用该服务，必须让"云冲印"读取自己储存在Google上的照片。</p>

<p><img src="/blogimg/asset/2014/bg2014051202.png" alt="云冲印" title="" /></p>

<p>问题是只有得到用户的授权，Google才会同意"云冲印"读取这些照片。那么，"云冲印"怎样获得用户的授权呢？</p>

<p>传统方法是，用户将自己的Google用户名和密码，告诉"云冲印"，后者就可以读取用户的照片了。这样的做法有以下几个严重的缺点。</p>

<blockquote>
  <p>（1）"云冲印"为了后续的服务，会保存用户的密码，这样很不安全。</p>

<p>（2）Google不得不部署密码登录，而我们知道，单纯的密码登录并不安全。</p>

<p>（3）"云冲印"拥有了获取用户储存在Google所有资料的权力，用户没法限制"云冲印"获得授权的范围和有效期。</p>

<p>（4）用户只有修改密码，才能收回赋予"云冲印"的权力。但是这样做，会使得其他所有获得用户授权的第三方应用程序全部失效。</p>

<p>（5）只要有一个第三方应用程序被破解，就会导致用户密码泄漏，以及所有被密码保护的数据泄漏。</p>
</blockquote>

<p>OAuth就是为了解决上面这些问题而诞生的。</p>

<h2>二、名词定义</h2>

<p>在详细讲解OAuth 2.0之前，需要了解几个专用名词。它们对读懂后面的讲解，尤其是几张图，至关重要。</p>

<blockquote>
  <p>（1） <strong>Third-party application</strong>：第三方应用程序，本文中又称"客户端"（client），即上一节例子中的"云冲印"。</p>

<p>（2）<strong>HTTP service</strong>：HTTP服务提供商，本文中简称"服务提供商"，即上一节例子中的Google。</p>

<p>（3）<strong>Resource Owner</strong>：资源所有者，本文中又称"用户"（user）。</p>

<p>（4）<strong>User Agent</strong>：用户代理，本文中就是指浏览器。</p>

<p>（5）<strong>Authorization server</strong>：认证服务器，即服务提供商专门用来处理认证的服务器。</p>

<p>（6）<strong>Resource server</strong>：资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。</p>
</blockquote>

<p>知道了上面这些名词，就不难理解，OAuth的作用就是让"客户端"安全可控地获取"用户"的授权，与"服务商提供商"进行互动。</p>

<h2>三、OAuth的思路</h2>

<p>OAuth在"客户端"与"服务提供商"之间，设置了一个授权层（authorization layer）。"客户端"不能直接登录"服务提供商"，只能登录授权层，以此将用户与客户端区分开来。"客户端"登录授权层所用的令牌（token），与用户的密码不同。用户可以在登录的时候，指定授权层令牌的权限范围和有效期。</p>

<p>"客户端"登录授权层以后，"服务提供商"根据令牌的权限范围和有效期，向"客户端"开放用户储存的资料。</p>

<h2>四、运行流程</h2>

<p>OAuth 2.0的运行流程如下图，摘自RFC 6749。</p>

<p><img src="/blogimg/asset/2014/bg2014051203.png" alt="OAuth运行流程" title="" /></p>

<blockquote>
  <p>（A）用户打开客户端以后，客户端要求用户给予授权。</p>

<p>（B）用户同意给予客户端授权。</p>

<p>（C）客户端使用上一步获得的授权，向认证服务器申请令牌。</p>

<p>（D）认证服务器对客户端进行认证以后，确认无误，同意发放令牌。</p>

<p>（E）客户端使用令牌，向资源服务器申请获取资源。</p>

<p>（F）资源服务器确认令牌无误，同意向客户端开放资源。</p>
</blockquote>

<p>不难看出来，上面六个步骤之中，B是关键，即用户怎样才能给于客户端授权。有了这个授权以后，客户端就可以获取令牌，进而凭令牌获取资源。</p>

<p>下面一一讲解客户端获取授权的四种模式。</p>

<h2>五、客户端的授权模式</h2>

<p>客户端必须得到用户的授权（authorization grant），才能获得令牌（access token）。OAuth 2.0定义了四种授权方式。</p>

<ul>
<li>授权码模式（authorization code）</li>
<li>简化模式（implicit）</li>
<li>密码模式（resource owner password credentials）</li>
<li>客户端模式（client credentials）</li>
</ul>

<h2>六、授权码模式</h2>

<p>授权码模式（authorization code）是功能最完整、流程最严密的授权模式。它的特点就是通过客户端的后台服务器，与"服务提供商"的认证服务器进行互动。</p>

<p><img src="/blogimg/asset/2014/bg2014051204.png" alt="授权码模式" title="" /></p>

<p>它的步骤如下：</p>

<blockquote>
  <p>（A）用户访问客户端，后者将前者导向认证服务器。</p>

<p>（B）用户选择是否给予客户端授权。</p>

<p>（C）假设用户给予授权，认证服务器将用户导向客户端事先指定的"重定向URI"（redirection URI），同时附上一个授权码。</p>

<p>（D）客户端收到授权码，附上早先的"重定向URI"，向认证服务器申请令牌。这一步是在客户端的后台的服务器上完成的，对用户不可见。</p>

<p>（E）认证服务器核对了授权码和重定向URI，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）。</p>
</blockquote>

<p>下面是上面这些步骤所需要的参数。</p>

<p>A步骤中，客户端申请认证的URI，包含以下参数：</p>

<ul>
<li>response_type：表示授权类型，必选项，此处的值固定为"code"</li>
<li>client_id：表示客户端的ID，必选项</li>
<li>redirect_uri：表示重定向URI，可选项</li>
<li>scope：表示申请的权限范围，可选项</li>
<li>state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
GET /authorize?response_type=code&client_id=s6BhdRkqt3&state=xyz
        &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1
Host: server.example.com

</code></pre></blockquote>

<p>C步骤中，服务器回应客户端的URI，包含以下参数：</p>

<ul>
<li>code：表示授权码，必选项。该码的有效期应该很短，通常设为10分钟，客户端只能使用该码一次，否则会被授权服务器拒绝。该码与客户端ID和重定向URI，是一一对应关系。</li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
HTTP/1.1 302 Found
Location: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA
          &state=xyz

</code></pre></blockquote>

<p>D步骤中，客户端向认证服务器申请令牌的HTTP请求，包含以下参数：</p>

<ul>
<li>grant_type：表示使用的授权模式，必选项，此处的值固定为"authorization_code"。</li>
<li>code：表示上一步获得的授权码，必选项。</li>
<li>redirect_uri：表示重定向URI，必选项，且必须与A步骤中的该参数值保持一致。</li>
<li>client_id：表示客户端ID，必选项。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
POST /token HTTP/1.1
Host: server.example.com
Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&code=SplxlOBeZQQYbYS6WxSbIA
&redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb

</code></pre></blockquote>

<p>E步骤中，认证服务器发送的HTTP回复，包含以下参数：</p>

<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项，可以是bearer类型或mac类型。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>refresh_token：表示更新令牌，用来获取下一次的访问令牌，可选项。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
     HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8
     Cache-Control: no-store
     Pragma: no-cache

     {
       "access_token":"2YotnFZFEjr1zCsicMWpAA",
       "token_type":"example",
       "expires_in":3600,
       "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",
       "example_parameter":"example_value"
     }

</code></pre></blockquote>

<p>从上面代码可以看到，相关参数使用JSON格式发送（Content-Type: application/json）。此外，HTTP头信息中明确指定不得缓存。</p>

<h2>七、简化模式</h2>

<p>简化模式（implicit grant type）不通过第三方应用程序的服务器，直接在浏览器中向认证服务器申请令牌，跳过了"授权码"这个步骤，因此得名。所有步骤在浏览器中完成，令牌对访问者是可见的，且客户端不需要认证。</p>

<p><img src="/blogimg/asset/2014/bg2014051205.png" alt="简化模式" title="" /></p>

<p>它的步骤如下：</p>

<blockquote>
  <p>（A）客户端将用户导向认证服务器。</p>

<p>（B）用户决定是否给于客户端授权。</p>

<p>（C）假设用户给予授权，认证服务器将用户导向客户端指定的"重定向URI"，并在URI的Hash部分包含了访问令牌。</p>

<p>（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。</p>

<p>（E）资源服务器返回一个网页，其中包含的代码可以获取Hash值中的令牌。</p>

<p>（F）浏览器执行上一步获得的脚本，提取出令牌。</p>

<p>（G）浏览器将令牌发给客户端。</p>
</blockquote>

<p>下面是上面这些步骤所需要的参数。</p>

<p>A步骤中，客户端发出的HTTP请求，包含以下参数：</p>

<ul>
<li>response_type：表示授权类型，此处的值固定为"token"，必选项。</li>
<li>client_id：表示客户端的ID，必选项。</li>
<li>redirect_uri：表示重定向的URI，可选项。</li>
<li>scope：表示权限范围，可选项。</li>
<li>state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
    GET /authorize?response_type=token&client_id=s6BhdRkqt3&state=xyz
        &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1
    Host: server.example.com

</code></pre></blockquote>

<p>C步骤中，认证服务器回应客户端的URI，包含以下参数：</p>

<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
     HTTP/1.1 302 Found
     Location: http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA
               &state=xyz&token_type=example&expires_in=3600

</code></pre></blockquote>

<p>在上面的例子中，认证服务器用HTTP头信息的Location栏，指定浏览器重定向的网址。注意，在这个网址的Hash部分包含了令牌。</p>

<p>根据上面的D步骤，下一步浏览器会访问Location指定的网址，但是Hash部分不会发送。接下来的E步骤，服务提供商的资源服务器发送过来的代码，会提取出Hash中的令牌。</p>

<h2>八、密码模式</h2>

<p>密码模式（Resource Owner Password Credentials Grant）中，用户向客户端提供自己的用户名和密码。客户端使用这些信息，向"服务商提供商"索要授权。</p>

<p>在这种模式中，用户必须把自己的密码给客户端，但是客户端不得储存密码。这通常用在用户对客户端高度信任的情况下，比如客户端是操作系统的一部分，或者由一个著名公司出品。而认证服务器只有在其他授权模式无法执行的情况下，才能考虑使用这种模式。</p>

<p><img src="/blogimg/asset/2014/bg2014051206.png" alt="密码模式" title="" /></p>

<p>它的步骤如下：</p>

<blockquote>
  <p>（A）用户向客户端提供用户名和密码。</p>

<p>（B）客户端将用户名和密码发给认证服务器，向后者请求令牌。</p>

<p>（C）认证服务器确认无误后，向客户端提供访问令牌。</p>
</blockquote>

<p>B步骤中，客户端发出的HTTP请求，包含以下参数：</p>

<ul>
<li>grant_type：表示授权类型，此处的值固定为"password"，必选项。</li>
<li>username：表示用户名，必选项。</li>
<li>password：表示用户的密码，必选项。</li>
<li>scope：表示权限范围，可选项。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
     POST /token HTTP/1.1
     Host: server.example.com
     Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
     Content-Type: application/x-www-form-urlencoded

     grant_type=password&username=johndoe&password=A3ddj3w

</code></pre></blockquote>

<p>C步骤中，认证服务器向客户端发送访问令牌，下面是一个例子。</p>

<blockquote><pre><code class="language-http">
     HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8
     Cache-Control: no-store
     Pragma: no-cache

     {
       "access_token":"2YotnFZFEjr1zCsicMWpAA",
       "token_type":"example",
       "expires_in":3600,
       "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",
       "example_parameter":"example_value"
     }

</code></pre></blockquote>

<p>上面代码中，各个参数的含义参见《授权码模式》一节。</p>

<p>整个过程中，客户端不得保存用户的密码。</p>

<h2>九、客户端模式</h2>

<p>客户端模式（Client Credentials Grant）指客户端以自己的名义，而不是以用户的名义，向"服务提供商"进行认证。严格地说，客户端模式并不属于OAuth框架所要解决的问题。在这种模式中，用户直接向客户端注册，客户端以自己的名义要求"服务提供商"提供服务，其实不存在授权问题。</p>

<p><img src="/blogimg/asset/2014/bg2014051207.png" alt="客户端模式" title="" /></p>

<p>它的步骤如下：</p>

<blockquote>
  <p>（A）客户端向认证服务器进行身份认证，并要求一个访问令牌。</p>

<p>（B）认证服务器确认无误后，向客户端提供访问令牌。</p>
</blockquote>

<p>A步骤中，客户端发出的HTTP请求，包含以下参数：</p>

<ul>
<li>grant<em>type：表示授权类型，此处的值固定为"client</em>credentials"，必选项。</li>
<li>scope：表示权限范围，可选项。</li>
</ul>

<blockquote><pre><code class="language-http">
     POST /token HTTP/1.1
     Host: server.example.com
     Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
     Content-Type: application/x-www-form-urlencoded

     grant_type=client_credentials

</code></pre></blockquote>

<p>认证服务器必须以某种方式，验证客户端身份。</p>

<p>B步骤中，认证服务器向客户端发送访问令牌，下面是一个例子。</p>

<blockquote><pre><code class="language-http">
     HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8
     Cache-Control: no-store
     Pragma: no-cache

     {
       "access_token":"2YotnFZFEjr1zCsicMWpAA",
       "token_type":"example",
       "expires_in":3600,
       "example_parameter":"example_value"
     }

</code></pre></blockquote>

<p>上面代码中，各个参数的含义参见《授权码模式》一节。</p>

<h2>十、更新令牌</h2>

<p>如果用户访问的时候，客户端的"访问令牌"已经过期，则需要使用"更新令牌"申请一个新的访问令牌。</p>

<p>客户端发出更新令牌的HTTP请求，包含以下参数：</p>

<ul>
<li>grant<em>type：表示使用的授权模式，此处的值固定为"refresh</em>token"，必选项。</li>
<li>refresh_token：表示早前收到的更新令牌，必选项。</li>
<li>scope：表示申请的授权范围，不可以超出上一次申请的范围，如果省略该参数，则表示与上一次一致。</li>
</ul>

<p>下面是一个例子。</p>

<blockquote><pre><code class="language-http">
     POST /token HTTP/1.1
     Host: server.example.com
     Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
     Content-Type: application/x-www-form-urlencoded

     grant_type=refresh_token&refresh_token=tGzv3JOkF0XG5Qx2TlKWIA

</code></pre></blockquote>

<p>（完）</p>

                                    <!-- /div -->

                                </div>
    <script type="text/javascript" src="/newwindow.js"></script>
                                <div class="asset-footer">

<h3>文档信息</h3>
<ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2014-05-12T21:07:52+08:00">2014年5月12日</abbr></li>

</ul>
                                </div>
</article>
                            </div>




<div id="related_entries">
<h2>相关文章</h2>
<ul>

<li><strong>2020.08.26: <a href="http://www.ruanyifeng.com/blog/2020/08/rsync.html">rsync 用法教程</a></strong>

                           <div class="entry-body">
                              一、简介

rsync 是一个常用的 Linux 应用程序，用于文件同步。

                           </div>

</li>

 
<li><strong>2020.08.10: <a href="http://www.ruanyifeng.com/blog/2020/08/five-css-layouts-in-one-line.html">只要一行代码，实现五种 CSS 经典布局</a></strong>

                           <div class="entry-body">
                              页面布局是样式开发的第一步，也是 CSS 最重要的功能之一。

                           </div>

</li>

 
<li><strong>2020.07.08: <a href="http://www.ruanyifeng.com/blog/2020/07/ssh-certificate.html">SSH 证书登录教程</a></strong>

                           <div class="entry-body">
                              SSH 是服务器登录工具，提供密码登录和密钥登录。

                           </div>

</li>

 
<li><strong>2020.06.21: <a href="http://www.ruanyifeng.com/blog/2020/06/android-host-solutions.html">安卓手机系统连接电视，最好的方案是什么？</a></strong>

                           <div class="entry-body">
                              现在，大部分人都用手机看视频。但是手机屏幕太小，不适合高清视频。电视看视频，才有更好的体验。

                           </div>

</li>

 
</ul>
</div>



                    

                    <div id="comments" class="comments">


    
    
        
    <h2 class="comments-header">留言（177条）</h2>

    <div id="comments-content" class="comments-content" style="clear: left;">
        
        <div id="comment-322940" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://mengkang.net/" href="http://mengkang.net/" target="_blank" rel="nofollow">周梦康</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-322940">
            <p>阮老师的文章都是精品，真正做到深入浅出。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 12, 2014 10:10 PM">2014年5月12日 22:10</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-322940">#</a>
 | <a href="#comment-text" title="引用周梦康的这条留言" onclick="return CommentQuote('comment-quote-322940','周梦康');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-322952" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://hutusi.com" href="http://hutusi.com" target="_blank" rel="nofollow">hutusi</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-322952">
            <p>留名，慢慢看~</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 12, 2014 10:58 PM">2014年5月12日 22:58</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-322952">#</a>
 | <a href="#comment-text" title="引用hutusi的这条留言" onclick="return CommentQuote('comment-quote-322952','hutusi');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-322957" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">chility</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-322957">
            <p>今天培训老师讲了这部分，恰好阮老师写了这篇文章介绍，加深理解。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 13, 2014 12:31 AM">2014年5月13日 00:31</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-322957">#</a>
 | <a href="#comment-text" title="引用chility的这条留言" onclick="return CommentQuote('comment-quote-322957','chility');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-322960" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">phi</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-322960">
            <p>那什么，没看懂。能不能用位图。ASCII图看的很不习惯。谢谢</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 13, 2014  1:24 AM">2014年5月13日 01:24</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-322960">#</a>
 | <a href="#comment-text" title="引用phi的这条留言" onclick="return CommentQuote('comment-quote-322960','phi');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-322994" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">WhatDoesTheFoxSay</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-322994">
            <p>授权码模式这部分中的“E步骤中，客户端发送的HTTP回复，包含以下参数“这句话，是否应为”认证服务器发送的HTTP回复“？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 13, 2014  5:00 AM">2014年5月13日 05:00</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-322994">#</a>
 | <a href="#comment-text" title="引用WhatDoesTheFoxSay的这条留言" onclick="return CommentQuote('comment-quote-322994','WhatDoesTheFoxSay');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-323002" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://sexywp.com" href="http://sexywp.com" target="_blank" rel="nofollow">Charles</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-323002">
            <p>本文关于state参数的解释，是语焉不详的。事实上，绝大多数的互联网中文文档对这个参数都语焉不详。我想，对于造成近期互联网上危害广泛的OAuth漏洞来说，众多中文技术资料对这个参数解释不到位，对这个参数的实现没有给出清晰的指导，也是成因的一部分。原文是这么说的：RECOMMENDED. An opaque value used by the client to maintain state between the request and callback. The authorization server includes this value when redirecting the user-agent back to the client. The parameter SHOULD be used for preventing cross-site request forgery as described in Section 10.12.如果阮老师只是翻译为什么“客户端状态”之类的话，还有什么“可以随便填”，这算不上一种到位的解释。首先，这个参数是“RECOMMENDED”，并非什么可有可无的东西，事实是很多厂商都实现成了可有可无，其次，这个参数是“SHOULD”，为啥“SHOULD”呢，因为会引发“CSRF”。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 13, 2014  7:41 AM">2014年5月13日 07:41</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-323002">#</a>
 | <a href="#comment-text" title="引用Charles的这条留言" onclick="return CommentQuote('comment-quote-323002','Charles');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-323009" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">阮一峰</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-323009">
            <blockquote>
<pre>引用WhatDoesTheFoxSay的发言：</pre>

<p>授权码模式这部分中的“E步骤中，客户端发送的HTTP回复，包含以下参数“这句话，是否应为”认证服务器发送的HTTP回复“？</p>

</blockquote>

<p>谢谢指出，已经改过来了。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 13, 2014  8:44 AM">2014年5月13日 08:44</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-323009">#</a>
 | <a href="#comment-text" title="引用阮一峰的这条留言" onclick="return CommentQuote('comment-quote-323009','阮一峰');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-323011" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://houcoder.github.io" href="http://houcoder.github.io" target="_blank" rel="nofollow">Tonni</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-323011">
            <p>阮兄的博客又更新了，前几天买的《黑客与画家》昨天到了，很不错的书。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 13, 2014  9:05 AM">2014年5月13日 09:05</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-323011">#</a>
 | <a href="#comment-text" title="引用Tonni的这条留言" onclick="return CommentQuote('comment-quote-323011','Tonni');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-323237" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://gangyou.me" href="http://gangyou.me" target="_blank" rel="nofollow">YG</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-323237">
            <p>看了这么多OAuth的文章，阮老师的这篇是最好懂的，拜读了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 14, 2014  8:19 AM">2014年5月14日 08:19</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-323237">#</a>
 | <a href="#comment-text" title="引用YG的这条留言" onclick="return CommentQuote('comment-quote-323237','YG');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-323850" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">M16</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-323850">
            <p>说白了oauth就是一个网络版的usbkey</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 17, 2014  1:50 PM">2014年5月17日 13:50</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-323850">#</a>
 | <a href="#comment-text" title="引用M16的这条留言" onclick="return CommentQuote('comment-quote-323850','M16');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324040" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">洋子</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324040">
            <p>支付宝链接已失效</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 18, 2014 10:56 PM">2014年5月18日 22:56</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324040">#</a>
 | <a href="#comment-text" title="引用洋子的这条留言" onclick="return CommentQuote('comment-quote-324040','洋子');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324236" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Nicole</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324236">
            <p>非常感谢老师的分享，收益了。。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 20, 2014  9:13 AM">2014年5月20日 09:13</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324236">#</a>
 | <a href="#comment-text" title="引用Nicole的这条留言" onclick="return CommentQuote('comment-quote-324236','Nicole');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324238" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">匆匆过客</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324238">
            <blockquote>
<pre>引用Charles的发言：</pre>

<p>本文关于state参数的解释，是语焉不详的。事实上，绝大多数的互联网中文文档对这个参数都语焉不详。我想，对于造成近期互联网上危害广泛的OAuth漏洞来说，众多中文技术资料对这个参数解释不到位，对这个参数的实现没有给出清晰的指导，也是成因的一部分。原文是这么说的：RECOMMENDED. An opaque value used by the client to maintain state between the request and callback. The authorization server includes this value when redirecting the user-agent back to the client. The parameter SHOULD be used for preventing cross-site request forgery as described in Section 10.12.如果阮老师只是翻译为什么“客户端状态”之类的话，还有什么“可以随便填”，这算不上一种到位的解释。首先，这个参数是“RECOMMENDED”，并非什么可有可无的东西，事实是很多厂商都实现成了可有可无，其次，这个参数是“SHOULD”，为啥“SHOULD”呢，因为会引发“CSRF”。</p>

</blockquote>

<p>仔细一看，确实，如果state项不用动态数据的话会存在CSRF漏洞</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 20, 2014  9:39 AM">2014年5月20日 09:39</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324238">#</a>
 | <a href="#comment-text" title="引用匆匆过客的这条留言" onclick="return CommentQuote('comment-quote-324238','匆匆过客');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324450" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">smilexu</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324450">
            <p>（E）客户端使用令牌，向资源服务器申请获取资源。</p>

<p>令牌就可以？整个过程都没有用户名和密码的获得，那资源服务器又是如何确认用户的？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 21, 2014 12:01 PM">2014年5月21日 12:01</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324450">#</a>
 | <a href="#comment-text" title="引用smilexu的这条留言" onclick="return CommentQuote('comment-quote-324450','smilexu');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324482" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">万文婷</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324482">
            <p>我是比较文学与世界文学的硕士生，希望您能联系我，探讨一下卡尔维诺。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 21, 2014  4:19 PM">2014年5月21日 16:19</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324482">#</a>
 | <a href="#comment-text" title="引用万文婷的这条留言" onclick="return CommentQuote('comment-quote-324482','万文婷');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324809" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">niannian</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324809">
            <p>授权码模式中，D步骤，文中说client_id是必选项，但是随后的例子中没有这项</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 23, 2014  2:12 PM">2014年5月23日 14:12</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324809">#</a>
 | <a href="#comment-text" title="引用niannian的这条留言" onclick="return CommentQuote('comment-quote-324809','niannian');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324975" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">spojus</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324975">
            <p>收款主页下线啦</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 24, 2014 11:01 PM">2014年5月24日 23:01</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324975">#</a>
 | <a href="#comment-text" title="引用spojus的这条留言" onclick="return CommentQuote('comment-quote-324975','spojus');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-324977" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">loddit</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-324977">
            <p>同ls的niannian<br />
另外 granttype authorizationcode 都没加 _ 下划线</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 24, 2014 11:20 PM">2014年5月24日 23:20</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-324977">#</a>
 | <a href="#comment-text" title="引用loddit的这条留言" onclick="return CommentQuote('comment-quote-324977','loddit');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-325078" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Ike</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-325078">
            <blockquote>
<pre>引用phi的发言：</pre>

<p>那什么，没看懂。能不能用位图。ASCII图看的很不习惯。谢谢</p>

</blockquote>

<p>話說，RFC本來就是純文字檔案，這樣的圖其實看了很親切。。。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 25, 2014  4:14 PM">2014年5月25日 16:14</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-325078">#</a>
 | <a href="#comment-text" title="引用Ike的这条留言" onclick="return CommentQuote('comment-quote-325078','Ike');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-327535" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">rhgb</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-327535">
            <blockquote>
<pre>引用smilexu的发言：</pre>

<p>（E）客户端使用令牌，向资源服务器申请获取资源。</p>

<p>令牌就可以？整个过程都没有用户名和密码的获得，那资源服务器又是如何确认用户的？</p>

</blockquote>
使用oauth本来就是为了避免客户端获得用户名和密码……
资源服务器如何用用户名密码来确认用户，就如何用令牌来确认用户。令牌就是一种包含（隐含）用户id的一次性的密码

        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June  7, 2014  4:47 PM">2014年6月 7日 16:47</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-327535">#</a>
 | <a href="#comment-text" title="引用rhgb的这条留言" onclick="return CommentQuote('comment-quote-327535','rhgb');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-328221" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">king</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-328221">
            <p>如果客户端做一个假的验证授权页面，来套取用户，用户名和密码，是有可能的吧？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 12, 2014 11:30 AM">2014年6月12日 11:30</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-328221">#</a>
 | <a href="#comment-text" title="引用king的这条留言" onclick="return CommentQuote('comment-quote-328221','king');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-328876" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://jucelin.com" href="http://jucelin.com" target="_blank" rel="nofollow">jucelin</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-328876">
            <blockquote>
<pre>引用king的发言：</pre>

<p>如果客户端做一个假的验证授权页面，来套取用户，用户名和密码，是有可能的吧？</p>

</blockquote>

<p>我也有此疑问。weibo.com提供的都提示"请认准本页URL地址必须以 api.weibo.com 开头"，这提示基本上没用。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 16, 2014  8:41 PM">2014年6月16日 20:41</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-328876">#</a>
 | <a href="#comment-text" title="引用jucelin的这条留言" onclick="return CommentQuote('comment-quote-328876','jucelin');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-329069" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">mll</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-329069">
            <p>协议中的 SHOULD，应该等同于 MUST 来对待。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 19, 2014  5:25 PM">2014年6月19日 17:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-329069">#</a>
 | <a href="#comment-text" title="引用mll的这条留言" onclick="return CommentQuote('comment-quote-329069','mll');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-331286" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://songjinghe.byethost7.com" href="http://songjinghe.byethost7.com" target="_blank" rel="nofollow">sjh</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-331286">
            <blockquote>
<pre>引用jucelin的发言：</pre>

<p></p>

<p>我也有此疑问。weibo.com提供的都提示"请认准本页URL地址必须以 api.weibo.com 开头"，这提示基本上没用。</p>

</blockquote>

<p>工商银行的网银在开通时要求用户自己说一句话，每次使用网银付款时网站会向用户出示这句话以证明网站的合法性。这个感觉要好些吧~</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July 18, 2014  5:27 PM">2014年7月18日 17:27</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-331286">#</a>
 | <a href="#comment-text" title="引用sjh的这条留言" onclick="return CommentQuote('comment-quote-331286','sjh');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-332867" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">lvqiuyi</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-332867">
            <p>有两点不太明白<br />
1.授权码授权里，为什么要两次传递重定向url呢？有什么好处？<br />
2.D步骤里，传递的参数有Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW，什么作用呢？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  5, 2014 11:24 AM">2014年8月 5日 11:24</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-332867">#</a>
 | <a href="#comment-text" title="引用lvqiuyi的这条留言" onclick="return CommentQuote('comment-quote-332867','lvqiuyi');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-332891" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">lvqiuyi</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-332891">
            <p>懂了，Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW，应该是对于应用client的授权认证，这样就相当于有两层保护，一层是认证客户端，一层是认证用户，不过basic的加密方式，是不是不太安全呢？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  5, 2014  2:44 PM">2014年8月 5日 14:44</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-332891">#</a>
 | <a href="#comment-text" title="引用lvqiuyi的这条留言" onclick="return CommentQuote('comment-quote-332891','lvqiuyi');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-336963" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">suolaiwo</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-336963">
            <p>请问一下，授权码code，其作用是什么？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September  8, 2014  2:29 PM">2014年9月 8日 14:29</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-336963">#</a>
 | <a href="#comment-text" title="引用suolaiwo的这条留言" onclick="return CommentQuote('comment-quote-336963','suolaiwo');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-338157" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">guest</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-338157">
            <blockquote>
<pre>引用suolaiwo的发言：</pre>

<p>请问一下，授权码code，其作用是什么？</p>

</blockquote>

<p>本质的作用是避免Access Token通过URL返回，有篇视频讲这个比较详细《[开放平台]一步一步理解OAuth2协议-全网首发》<br />
<a href="http://edu.51cto.com/index.php?do=course&m=addlession&course_id=2035" rel="nofollow">http://edu.51cto.com/index.php?do=course&m=addlession&course_id=2035</a></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 16, 2014  2:30 PM">2014年9月16日 14:30</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-338157">#</a>
 | <a href="#comment-text" title="引用guest的这条留言" onclick="return CommentQuote('comment-quote-338157','guest');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-338437" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">zhiwen</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-338437">
            <p>请问你这个是使用什么框架实现的OAuth的相关服务器端的？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 18, 2014  1:55 PM">2014年9月18日 13:55</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-338437">#</a>
 | <a href="#comment-text" title="引用zhiwen的这条留言" onclick="return CommentQuote('comment-quote-338437','zhiwen');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-341907" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://pinbaijia.cn" href="http://pinbaijia.cn" target="_blank" rel="nofollow">陈伟</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-341907">
            <p>正在学习OAuth2，写得太好了！非常容易理解！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 21, 2014  4:57 PM">2014年10月21日 16:57</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-341907">#</a>
 | <a href="#comment-text" title="引用陈伟的这条留言" onclick="return CommentQuote('comment-quote-341907','陈伟');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-341942" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">hebidu</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-341942">
            <p>我想知道 如何  生成access_token ，refresh_token 。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 22, 2014 12:45 PM">2014年10月22日 12:45</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-341942">#</a>
 | <a href="#comment-text" title="引用hebidu的这条留言" onclick="return CommentQuote('comment-quote-341942','hebidu');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-342264" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">James</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-342264">
            <blockquote>
<pre>引用hebidu的发言：</pre>

<p>我想知道 如何生成access_token ，refresh_token 。</p>

</blockquote>

<p>生成access_token ，refresh_token 很简单,取一唯一的随机信息再做BASE64编码即可,它本身不包含任何有效信息的;服务端把它和用户受权关联以校验其受权的有效性.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 29, 2014 10:45 AM">2014年10月29日 10:45</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-342264">#</a>
 | <a href="#comment-text" title="引用James的这条留言" onclick="return CommentQuote('comment-quote-342264','James');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-343428" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">惜今草</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-343428">
            <p>请问，OAuth2.0客户端认证模式怎么限制客户端到认证服务器申请权限的范围(Scope)？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 12, 2014  4:11 PM">2014年11月12日 16:11</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-343428">#</a>
 | <a href="#comment-text" title="引用惜今草的这条留言" onclick="return CommentQuote('comment-quote-343428','惜今草');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-343516" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">yxwoods</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-343516">
            <p>通俗易懂！感觉如等到风来吹开京都雾霾，重见蓝天白云！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 13, 2014  9:25 AM">2014年11月13日 09:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-343516">#</a>
 | <a href="#comment-text" title="引用yxwoods的这条留言" onclick="return CommentQuote('comment-quote-343516','yxwoods');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-344513" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">jinlong</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-344513">
            <p>引导用户到授权界面，用户会先登录后授权，整个授权过程中没有提到究竟是为“谁”授权的啊？ 那token是怎么和userid进行映射的呢？<br />
我开始理解的是，用户同意授权后，会告诉授权服务器client_id等参数外还会有userid。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 21, 2014  4:12 PM">2014年11月21日 16:12</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-344513">#</a>
 | <a href="#comment-text" title="引用jinlong的这条留言" onclick="return CommentQuote('comment-quote-344513','jinlong');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-346024" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">HM</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-346024">
            <p>阮老师为啥只发文而不答复上面技术性的探讨呢？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  9, 2014 12:47 PM">2014年12月 9日 12:47</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-346024">#</a>
 | <a href="#comment-text" title="引用HM的这条留言" onclick="return CommentQuote('comment-quote-346024','HM');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-346077" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">feiniu5566</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-346077">
            <blockquote>
<pre>引用jinlong的发言：</pre>

<p>引导用户到授权界面，用户会先登录后授权，整个授权过程中没有提到究竟是为“谁”授权的啊？ 那token是怎么和userid进行映射的呢？<br />
我开始理解的是，用户同意授权后，会告诉授权服务器client_id等参数外还会有userid。</p>

</blockquote>

<p>你要知道这个授权的目的是给第三方应用授权，让他有权利去获取用户放在服务器上的资源，所以你应该站在第三方应用的角度来看待这篇文章，你的目的就是获取用户<br />
QQ空间里的图片，就这么理解吧，差不想为那个什么讯发广告</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  9, 2014  4:31 PM">2014年12月 9日 16:31</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-346077">#</a>
 | <a href="#comment-text" title="引用feiniu5566的这条留言" onclick="return CommentQuote('comment-quote-346077','feiniu5566');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-347506" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">yuandghn</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-347506">
            <blockquote>
<pre>引用匆匆过客的发言：</pre>

<p></p>

<p>仔细一看，确实，如果state项不用动态数据的话会存在CSRF漏洞</p>

</blockquote>

<p>确实是这样的，很多时候大家都忽略了这个state参数存在的意义。企鹅家的OAuth2.0文档里倒是把这个参数说的很详细(非广告，实话实说)。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 25, 2015  6:00 PM">2015年1月25日 18:00</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-347506">#</a>
 | <a href="#comment-text" title="引用yuandghn的这条留言" onclick="return CommentQuote('comment-quote-347506','yuandghn');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-347587" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">smithfox</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-347587">
            <p>密码模式的例子中Request Header 中的 Authorization 是怎么来的？<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 28, 2015 12:39 PM">2015年1月28日 12:39</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-347587">#</a>
 | <a href="#comment-text" title="引用smithfox的这条留言" onclick="return CommentQuote('comment-quote-347587','smithfox');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-348327" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.tigerbull.info" href="http://www.tigerbull.info" target="_blank" rel="nofollow">xiaozi0lei</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-348327">
            <p><b>文章写的不错，深入浅出，正好在找Oauth 2.0相关的介绍文章，有帮助，多谢！</b></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March  3, 2015  3:49 PM">2015年3月 3日 15:49</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-348327">#</a>
 | <a href="#comment-text" title="引用xiaozi0lei的这条留言" onclick="return CommentQuote('comment-quote-348327','xiaozi0lei');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-348463" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">alleme</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-348463">
            <blockquote>
<pre>引用yuandghn的发言：</pre>

<p></p>

<p>确实是这样的，很多时候大家都忽略了这个state参数存在的意义。企鹅家的OAuth2.0文档里倒是把这个参数说的很详细(非广告，实话实说)。</p>

</blockquote>

<p>确实,刚查了腾讯文档  "state	可选	client端的状态值。用于第三方应用防止CSRF攻击，成功授权后回调时会原样带回。"</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 11, 2015 11:05 AM">2015年3月11日 11:05</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-348463">#</a>
 | <a href="#comment-text" title="引用alleme的这条留言" onclick="return CommentQuote('comment-quote-348463','alleme');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-349016" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Shion</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-349016">
            <p>拿到访问令牌（access token）后，是不是每次请求资源都必须附上访问令牌？OAuth2是不是只适合Http，基于OAuth2的都只能通过客户端轮询来获取最新状态而不能由服务端进行推送？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 10, 2015  4:38 PM">2015年4月10日 16:38</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-349016">#</a>
 | <a href="#comment-text" title="引用Shion的这条留言" onclick="return CommentQuote('comment-quote-349016','Shion');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-349078" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">test</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-349078">
            <p>简化模式中：<br />
C）假设用户给予授权，认证服务器将用户导向客户端指定的"重定向URI"，并在URI的Hash部分包含了访问令牌。</p>

<p>（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。</p>

<p>（E）资源服务器返回一个网页，其中包含的代码可以获取Hash值中的令牌。<br />
c处的hash有没有多余呢？谢谢</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 14, 2015  8:21 AM">2015年4月14日 08:21</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-349078">#</a>
 | <a href="#comment-text" title="引用test的这条留言" onclick="return CommentQuote('comment-quote-349078','test');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-349137" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">许广辉</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-349137">
            <p>每次看到你这儿，东西就看明白了，简单清晰</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 16, 2015  3:52 PM">2015年4月16日 15:52</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-349137">#</a>
 | <a href="#comment-text" title="引用许广辉的这条留言" onclick="return CommentQuote('comment-quote-349137','许广辉');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-349185" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://shengzhaoli.com" href="http://shengzhaoli.com" target="_blank" rel="nofollow">shengzhao</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-349185">
            <p>具体的参考实现:  <a href="http://git.oschina.net/shengzhao/spring-oauth-server" rel="nofollow"><a href="http://git.oschina.net/shengzhao/spring-oauth-server" rel="nofollow">http://git.oschina.net/shengzhao/spring-oauth-server</a></a></p>

<p>整合Spring Security与Oauth2 的完整代码.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 20, 2015  3:00 PM">2015年4月20日 15:00</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-349185">#</a>
 | <a href="#comment-text" title="引用shengzhao的这条留言" onclick="return CommentQuote('comment-quote-349185','shengzhao');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-349639" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">song</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-349639">
            <p>描述的很好，不错。多谢了！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 13, 2015  5:46 PM">2015年5月13日 17:46</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-349639">#</a>
 | <a href="#comment-text" title="引用song的这条留言" onclick="return CommentQuote('comment-quote-349639','song');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-350107" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小正</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-350107">
            <p>首先谢谢阮老师，学习了，我想问下token存在数据库还是session里好呢<br />
存数据库是不是存一个过期时间(或者之类的)，还有如果用户操作了，这个token就延长时间还是固定死的(几个小时就几小时几天就几天)之后过期再用refresh取</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June  3, 2015  3:18 PM">2015年6月 3日 15:18</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-350107">#</a>
 | <a href="#comment-text" title="引用小正的这条留言" onclick="return CommentQuote('comment-quote-350107','小正');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-350119" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小正</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-350119">
            <blockquote>
<pre>引用小正的发言：</pre>

<p>首先谢谢阮老师，学习了，我想问下token存在数据库还是session里好呢<br />
存数据库是不是存一个过期时间(或者之类的)，还有如果用户操作了，这个token就延长时间还是固定死的(几个小时就几小时几天就几天)之后过期再用refresh取</p>

</blockquote>

<p>我查了一些资料，基本捋顺了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June  4, 2015  9:37 AM">2015年6月 4日 09:37</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-350119">#</a>
 | <a href="#comment-text" title="引用小正的这条留言" onclick="return CommentQuote('comment-quote-350119','小正');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-350904" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">杨鹏</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-350904">
            <p>感谢分享！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July 18, 2015  9:49 AM">2015年7月18日 09:49</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-350904">#</a>
 | <a href="#comment-text" title="引用杨鹏的这条留言" onclick="return CommentQuote('comment-quote-350904','杨鹏');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-350923" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小超人</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-350923">
            <p>授权码模式,为什么不能通过一次请求获取访问令牌?为什么非要加上一次授权码请求呢?现在授权码的作用是指定访问范围,那为什么不可以把访问范围作为参数传给认证服务器通过一次请求获取访问令牌呢?</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July 20, 2015 10:09 AM">2015年7月20日 10:09</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-350923">#</a>
 | <a href="#comment-text" title="引用小超人的这条留言" onclick="return CommentQuote('comment-quote-350923','小超人');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-350924" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小超人</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-350924">
            <blockquote>
<pre>引用小超人的发言：</pre>

<p>授权码模式,为什么不能通过一次请求获取访问令牌?为什么非要加上一次授权码请求呢?现在授权码的作用是指定访问范围,那为什么不可以把访问范围作为参数传给认证服务器通过一次请求获取访问令牌呢?</p>

</blockquote>

<p>授权码模式比简化模式好在哪里呢?求路过大神指点</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July 20, 2015 10:19 AM">2015年7月20日 10:19</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-350924">#</a>
 | <a href="#comment-text" title="引用小超人的这条留言" onclick="return CommentQuote('comment-quote-350924','小超人');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-350925" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小超人</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-350925">
            <blockquote>
<pre>引用小超人的发言：</pre>

<p></p>

<p>授权码模式比简化模式好在哪里呢?求路过大神指点</p>

</blockquote>
是安全性高吗?安全性高在哪里呢?求举例说明...

        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July 20, 2015 10:23 AM">2015年7月20日 10:23</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-350925">#</a>
 | <a href="#comment-text" title="引用小超人的这条留言" onclick="return CommentQuote('comment-quote-350925','小超人');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-351108" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.dplor.com" href="http://www.dplor.com" target="_blank" rel="nofollow">卡萨布兰卡</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-351108">
            <p>有一处clientcredentials，应该改为：client_credentials</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  3, 2015  4:58 PM">2015年8月 3日 16:58</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-351108">#</a>
 | <a href="#comment-text" title="引用卡萨布兰卡的这条留言" onclick="return CommentQuote('comment-quote-351108','卡萨布兰卡');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-351247" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://blog.newnius.com" href="http://blog.newnius.com" target="_blank" rel="nofollow">newnius</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-351247">
            <blockquote>
<pre>引用jinlong的发言：</pre>

<p>引导用户到授权界面，用户会先登录后授权，整个授权过程中没有提到究竟是为“谁”授权的啊？ 那token是怎么和userid进行映射的呢？<br />
我开始理解的是，用户同意授权后，会告诉授权服务器client_id等参数外还会有userid。</p>

</blockquote>

<p>这个token可以是惟一的，也就是说，token唯一确定一个用户，像@feiniu5566 说的，客户端可以通过令牌请求用户信息，包括userid，所以没有必要额外发送。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August 13, 2015  5:35 PM">2015年8月13日 17:35</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-351247">#</a>
 | <a href="#comment-text" title="引用newnius的这条留言" onclick="return CommentQuote('comment-quote-351247','newnius');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-351330" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">williamwue</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-351330">
            <p>写得十分清楚明白，多谢博主！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August 19, 2015  4:20 PM">2015年8月19日 16:20</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-351330">#</a>
 | <a href="#comment-text" title="引用williamwue的这条留言" onclick="return CommentQuote('comment-quote-351330','williamwue');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-351369" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">helm</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-351369">
            <p>阮老师，授权码模式中A步骤中的redirect_uri写的是可选项，D步骤说的是必选项，这里是不是有矛盾</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August 22, 2015 12:15 PM">2015年8月22日 12:15</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-351369">#</a>
 | <a href="#comment-text" title="引用helm的这条留言" onclick="return CommentQuote('comment-quote-351369','helm');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-351695" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">damon</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-351695">
            <p>大学的时候接触淘宝API，也碰到：授权码模式， 但是知道看了这篇文章才系统的理解。。<br />
谢了！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 15, 2015  6:01 PM">2015年9月15日 18:01</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-351695">#</a>
 | <a href="#comment-text" title="引用damon的这条留言" onclick="return CommentQuote('comment-quote-351695','damon');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-351794" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://yiwanbaqianli.com" href="http://yiwanbaqianli.com" target="_blank" rel="nofollow">xiaoC</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-351794">
            <p>最近在搞第三方登入，虽然已经按文档弄好了，但是并不懂OAuth为何物，看了楼主介绍总结，很是详细，多谢楼主</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 20, 2015  1:27 AM">2015年9月20日 01:27</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-351794">#</a>
 | <a href="#comment-text" title="引用xiaoC的这条留言" onclick="return CommentQuote('comment-quote-351794','xiaoC');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-351993" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">我爱demo</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-351993">
            <p>最近要弄这个， 虽然几天了还是没什么进度，不过看了这篇文章感觉很详细，虽然并不懂。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October  6, 2015  4:35 PM">2015年10月 6日 16:35</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-351993">#</a>
 | <a href="#comment-text" title="引用我爱demo的这条留言" onclick="return CommentQuote('comment-quote-351993','我爱demo');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-352071" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">aehyok</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-352071">
            <p>灰常好，学到了很多，谢谢大拿</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 10, 2015  3:22 PM">2015年10月10日 15:22</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-352071">#</a>
 | <a href="#comment-text" title="引用aehyok的这条留言" onclick="return CommentQuote('comment-quote-352071','aehyok');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-352570" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.baidu.com" href="http://www.baidu.com" target="_blank" rel="nofollow">分崩离析</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-352570">
            <blockquote>
<pre>引用smilexu的发言：</pre>

<p>（E）客户端使用令牌，向资源服务器申请获取资源。</p>

<p>令牌就可以？整个过程都没有用户名和密码的获得，那资源服务器又是如何确认用户的？</p>

</blockquote>

<p>令牌就可以代表用户，资源服务器只负责提供资源<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November  4, 2015 10:39 AM">2015年11月 4日 10:39</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-352570">#</a>
 | <a href="#comment-text" title="引用分崩离析的这条留言" onclick="return CommentQuote('comment-quote-352570','分崩离析');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-352800" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">陈柏成</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-352800">
            <p>（C）假设用户给予授权，认证服务器将用户导向客户端事先指定的"重定向URI"（redirection URI），同时附上一个授权码。</p>

<p>我不明白这个URI是用来跳转到认证服务器的url 还是指向前面例子说的云冲印的图片  谢谢了^^</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 16, 2015 11:40 AM">2015年11月16日 11:40</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-352800">#</a>
 | <a href="#comment-text" title="引用陈柏成的这条留言" onclick="return CommentQuote('comment-quote-352800','陈柏成');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353333" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://ddd" href="http://ddd" target="_blank" rel="nofollow">h</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353333">
            <blockquote>
<pre>引用分崩离析的发言：</pre>

<p></p>

<p>令牌就可以代表用户，资源服务器只负责提供资源</p>

<p><br />
</p></blockquote>

<p><br />
这个令牌是一个字符串，资源服务器如何鉴别这个字符串不是伪造的呢？需要资源服务器到认证服务器上去鉴别吗，还是两边约定一种鉴别机制(比如鉴别RMB一样)</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 16, 2015 10:08 AM">2015年12月16日 10:08</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353333">#</a>
 | <a href="#comment-text" title="引用h的这条留言" onclick="return CommentQuote('comment-quote-353333','h');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353336" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://ddd" href="http://ddd" target="_blank" rel="nofollow">h</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353336">
            <blockquote>
<pre>引用h的发言：</pre>

<p></p>

<p><br />
这个令牌是一个字符串，资源服务器如何鉴别这个字符串不是伪造的呢？需要资源服务器到认证服务器上去鉴别吗，还是两边约定一种鉴别机制(比如鉴别RMB一样)</p>

</blockquote>

<p></p>

<p>看了 RFC 文档<br />
<a href="http://tools.ietf.org/html/rfc6749" rel="nofollow">http://tools.ietf.org/html/rfc6749</a><br />
明白了，还是需要在 AS 和 RS 之间有个交互。</p>

<p>7.  Accessing Protected Resources</p>

<p>   The client accesses protected resources by presenting the access<br />
   token to the resource server.  The resource server MUST validate the<br />
   access token and ensure that it has not expired and that its scope<br />
   covers the requested resource.  The methods used by the resource<br />
   server to validate the access token (as well as any error responses)<br />
   are beyond the scope of this specification but generally involve an<br />
   interaction or coordination between the resource server and the<br />
   authorization server.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 16, 2015 11:42 AM">2015年12月16日 11:42</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353336">#</a>
 | <a href="#comment-text" title="引用h的这条留言" onclick="return CommentQuote('comment-quote-353336','h');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353337" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://kkk" href="http://kkk" target="_blank" rel="nofollow">h</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353337">
            <blockquote>
<pre>引用h的发言：</pre>

<p></p>

<p><br />
这个令牌是一个字符串，资源服务器如何鉴别这个字符串不是伪造的呢？需要资源服务器到认证服务器上去鉴别吗，还是两边约定一种鉴别机制(比如鉴别RMB一样)</p>

</blockquote>

<p><br />
<a href="http://tools.ietf.org/html/rfc6749" rel="nofollow">http://tools.ietf.org/html/rfc6749</a></p>

<p> Accessing Protected Resources</p>

<p>   The client accesses protected resources by presenting the access<br />
   token to the resource server.  The resource server MUST validate the<br />
   access token and ensure that it has not expired and that its scope<br />
   covers the requested resource.  The methods used by the resource<br />
   server to validate the access token (as well as any error responses)<br />
   are beyond the scope of this specification but generally involve an<br />
   interaction or coordination between the resource server and the<br />
   authorization server.</p>

<p>少不了 RS 到 AS 之间交互认证 access_token，这个 Oauth 没有规定啊,可以随意发挥啊。<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 16, 2015 11:45 AM">2015年12月16日 11:45</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353337">#</a>
 | <a href="#comment-text" title="引用h的这条留言" onclick="return CommentQuote('comment-quote-353337','h');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353382" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">兴杰</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353382">
            <p>看了好几次，今天终于明白第一种模式了，谢谢老师 ^^ </p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 18, 2015  7:00 PM">2015年12月18日 19:00</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353382">#</a>
 | <a href="#comment-text" title="引用兴杰的这条留言" onclick="return CommentQuote('comment-quote-353382','兴杰');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353472" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Ans</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353472">
            <p>不错，好文章！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 23, 2015 11:01 AM">2015年12月23日 11:01</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353472">#</a>
 | <a href="#comment-text" title="引用Ans的这条留言" onclick="return CommentQuote('comment-quote-353472','Ans');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353483" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Laughing_Lz</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353483">
            <p>restful一头雾水，老师太深奥，还是不懂，泪奔啊</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 23, 2015  5:56 PM">2015年12月23日 17:56</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353483">#</a>
 | <a href="#comment-text" title="引用Laughing_Lz的这条留言" onclick="return CommentQuote('comment-quote-353483','Laughing_Lz');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353492" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">喵喵</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353492">
            <blockquote>
<pre>引用陈柏成的发言：</pre>

<p>（C）假设用户给予授权，认证服务器将用户导向客户端事先指定的"重定向URI"（redirection URI），同时附上一个授权码。</p>

<p>我不明白这个URI是用来跳转到认证服务器的url 还是指向前面例子说的云冲印的图片谢谢了^^</p>

</blockquote>

<p>AS完成授权之后 把授权码和state附在重定向URI之后 再把浏览器重定向回这个地址  redirection URI是client提供的一个地址  做这一步是为了让Client能够获得授权码</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 24, 2015 10:25 AM">2015年12月24日 10:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353492">#</a>
 | <a href="#comment-text" title="引用喵喵的这条留言" onclick="return CommentQuote('comment-quote-353492','喵喵');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353493" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">喵喵</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353493">
            <p>请教阮老师和路过大神：</p>

<p><br />
我一直对implicit grant中的web-hosted client resource的作用感到疑惑<br />
为什么需要先向web-hosted client resource请求一个包含JS代码html 然后再用JS来读取access_token in Fragment(Hash)最后获得access_token 为什么不直接在本地用JS代码来读取呢？  我在stackoverflow上看到人说这是重定向的常用做法 并没有涉及到安全性的考虑  但是为什么要这样做呢？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 24, 2015 10:36 AM">2015年12月24日 10:36</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353493">#</a>
 | <a href="#comment-text" title="引用喵喵的这条留言" onclick="return CommentQuote('comment-quote-353493','喵喵');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353496" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">喵喵</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353496">
            <blockquote>
<pre>引用小超人的发言：</pre>

<p>授权码模式,为什么不能通过一次请求获取访问令牌?为什么非要加上一次授权码请求呢?现在授权码的作用是指定访问范围,那为什么不可以把访问范围作为参数传给认证服务器通过一次请求获取访问令牌呢?</p>

</blockquote>

<blockquote>
<pre>引用小超人的发言：</pre>

<p>授权码模式比简化模式好在哪里呢?求路过大神指点</p>

</blockquote>

<p>恩 先说为什么implicit grant不需要Authorization code吧 首先因为Authorization code和client secret是不会暴露给用户的 这个是服务器与服务器之间通信才需要的 所以implicit grant是通过user-agent（web browser）来与AS交互 你加上这两个东西之后 还是会暴露给用户看到的 所以没有必要在简化模式中增加他的复杂性</p>

<p>现在回到你问的 为什么授权码模式需要这个授权码 当然是为了安全性 首先在OAuth体系中access_token是作为访问获取资源的唯一凭据 如果在AS授权完成之后 直接通过重定向传回access_token 那么HTTP 302不是安全的 Attacker有可能会获取到access_token 但是如果只返回Authorization code 就算别人获得了也没什么卵用 因为Authorization code不能获取到资源  在client向AS请求access_token的过程中 是通过HTTPS来保证安全的 而且获得access_token是需要client secret与Authorization code一起的 Attacker知道了Authorization code但并不知道client secret 同样也不能获得到access_token  所以client与AS是有责任保护好client secret的</p>

<p>获得了access_token之后 向RS发起请求 RS其实会与AS交互 来校验access_token 所以你想直接伪造一个access_token 那也是不ok的</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 24, 2015 11:03 AM">2015年12月24日 11:03</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353496">#</a>
 | <a href="#comment-text" title="引用喵喵的这条留言" onclick="return CommentQuote('comment-quote-353496','喵喵');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353498" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">存在感为零的人</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353498">
            <p>很透彻</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 24, 2015 11:59 AM">2015年12月24日 11:59</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353498">#</a>
 | <a href="#comment-text" title="引用存在感为零的人的这条留言" onclick="return CommentQuote('comment-quote-353498','存在感为零的人');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353502" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">喵喵</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353502">
            <p>突然想到漏说了一块  关于为什么不直接用HTTPS重定向回client<br />
是因为不是所有client server都支持HTTPS~所以为了通用性 和安全性 才衍生出来这么一个Auth code</p>

<p>但是AS肯定是实现HTTPS的 所以在client向AS提起request 是木有问题的~</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 24, 2015  2:54 PM">2015年12月24日 14:54</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353502">#</a>
 | <a href="#comment-text" title="引用喵喵的这条留言" onclick="return CommentQuote('comment-quote-353502','喵喵');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-353913" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.baidu.com" href="http://www.baidu.com" target="_blank" rel="nofollow">李先森</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-353913">
            <p>不太明白 为什么使用auth_code换取access_token的时候 还要传redirect_uri</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 10, 2016  1:39 PM">2016年1月10日 13:39</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-353913">#</a>
 | <a href="#comment-text" title="引用李先森的这条留言" onclick="return CommentQuote('comment-quote-353913','李先森');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-354535" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">北言</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-354535">
            <p>最近在学习oauth2,看了阮老师的文章,很透彻,明白了.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February 17, 2016 11:33 AM">2016年2月17日 11:33</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-354535">#</a>
 | <a href="#comment-text" title="引用北言的这条留言" onclick="return CommentQuote('comment-quote-354535','北言');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-354621" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">看法</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-354621">
            <p>写的很好，有参考价值</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February 22, 2016  5:37 PM">2016年2月22日 17:37</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-354621">#</a>
 | <a href="#comment-text" title="引用看法的这条留言" onclick="return CommentQuote('comment-quote-354621','看法');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-355249" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">雅爱</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-355249">
            <p>您好，想谈论下，在更新资源令牌的时候为什么要使用专门的更新令牌来更新资源令牌？为何不直接用资源令牌来更新资源令牌？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 25, 2016  8:51 AM">2016年3月25日 08:51</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-355249">#</a>
 | <a href="#comment-text" title="引用雅爱的这条留言" onclick="return CommentQuote('comment-quote-355249','雅爱');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-355374" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">popwar</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-355374">
            <p>有些解释不够详细，看看这个tutorial更容易理解http://tutorials.jenkov.com/oauth2/index.html</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April  1, 2016  1:40 PM">2016年4月 1日 13:40</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-355374">#</a>
 | <a href="#comment-text" title="引用popwar的这条留言" onclick="return CommentQuote('comment-quote-355374','popwar');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-355906" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">zsxkarl</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-355906">
            <p>最近在了解oauth，多谢详细讲解！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 26, 2016  9:11 PM">2016年4月26日 21:11</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-355906">#</a>
 | <a href="#comment-text" title="引用zsxkarl的这条留言" onclick="return CommentQuote('comment-quote-355906','zsxkarl');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-358472" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Ming</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-358472">
            <p>阮老师的文章还是非常好的。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 15, 2016  3:27 PM">2016年6月15日 15:27</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-358472">#</a>
 | <a href="#comment-text" title="引用Ming的这条留言" onclick="return CommentQuote('comment-quote-358472','Ming');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-359282" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Fishy</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-359282">
            <p>阮老师，请问一下。<br />
密码模式里的B步骤里<br />
提到的Authorization: Basic 码是如何获得的呢？<br />
在网上查到是userName：password的形式以Base64编码得到的，但是实际操作中得到的结果不一致。<br />
所以想问下，该值是怎么编码得出的呢？<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 17, 2016  9:19 AM">2016年6月17日 09:19</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-359282">#</a>
 | <a href="#comment-text" title="引用Fishy的这条留言" onclick="return CommentQuote('comment-quote-359282','Fishy');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-359286" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Fishy</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-359286">
            <p>阮老师，请问一下。<br />
密码模式里的B步骤里<br />
提到的Authorization: Basic 码是如何获得的呢？<br />
在网上查到是userName：password的形式以Base64编码得到的，但是实际操作中得到的结果不一致。<br />
所以想问下，该值是怎么编码得出的呢？<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 17, 2016 10:10 AM">2016年6月17日 10:10</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-359286">#</a>
 | <a href="#comment-text" title="引用Fishy的这条留言" onclick="return CommentQuote('comment-quote-359286','Fishy');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-360355" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">robottech</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-360355">
            <p>为什么用户授权客户端访问自己的资源后，授权服务器给客户端返回一个code 然后客户端通过code再向授权服务器申请令牌 然后拿着令牌去访问资源 而不是 用户授权客户端访问自己的资源后 授权服务器直接返回令牌给客户端？为啥要费个二道手，先返回CODE呢</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July  8, 2016 10:17 AM">2016年7月 8日 10:17</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-360355">#</a>
 | <a href="#comment-text" title="引用robottech的这条留言" onclick="return CommentQuote('comment-quote-360355','robottech');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-361479" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Euclidvi31</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-361479">
            <p>client secret 这个概念漏掉了吧</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July 31, 2016  9:38 PM">2016年7月31日 21:38</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-361479">#</a>
 | <a href="#comment-text" title="引用Euclidvi31的这条留言" onclick="return CommentQuote('comment-quote-361479','Euclidvi31');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-361972" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://meiyou" href="http://meiyou" target="_blank" rel="nofollow">路人甲</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-361972">
            <blockquote>
<pre>引用niannian的发言：</pre>

<p>授权码模式中，D步骤，文中说client_id是必选项，但是随后的例子中没有这项</p>

</blockquote>
client_id的确应该是必选项，应该是阮老师遗漏了
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  8, 2016  3:17 PM">2016年8月 8日 15:17</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-361972">#</a>
 | <a href="#comment-text" title="引用路人甲的这条留言" onclick="return CommentQuote('comment-quote-361972','路人甲');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-361973" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://meiyou" href="http://meiyou" target="_blank" rel="nofollow">路人乙</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-361973">
            <blockquote>
<pre>引用jucelin的发言：</pre>

<p></p>

<p>我也有此疑问。weibo.com提供的都提示"请认准本页URL地址必须以 api.weibo.com 开头"，这提示基本上没用。</p>

</blockquote>

<p>看新浪，腾讯的OAuth方案，客户端接入是需要申请，经过服务提供商审核的（会发放 client_id, cilent_secret），如果假冒一个钓鱼网站的话，审核是很有可能不通过的，甚至自己坑自己。<br />
（当然审核可能不一定100%杜绝）<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  8, 2016  3:25 PM">2016年8月 8日 15:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-361973">#</a>
 | <a href="#comment-text" title="引用路人乙的这条留言" onclick="return CommentQuote('comment-quote-361973','路人乙');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-361974" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://meiyou" href="http://meiyou" target="_blank" rel="nofollow">路人丙</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-361974">
            <blockquote>
<pre>引用Euclidvi31的发言：</pre>

<p>client secret 这个概念漏掉了吧</p>

</blockquote>

<p>client secret是必须的，阮老师遗漏了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  8, 2016  3:31 PM">2016年8月 8日 15:31</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-361974">#</a>
 | <a href="#comment-text" title="引用路人丙的这条留言" onclick="return CommentQuote('comment-quote-361974','路人丙');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-361976" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://meiyou" href="http://meiyou" target="_blank" rel="nofollow">路人丁</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-361976">
            <blockquote>
<pre>引用李先森的发言：</pre>

<p>不太明白 为什么使用auth_code换取access_token的时候 还要传redirect_uri</p>

</blockquote>
redirect_uri是回调地址，客户端需要接受access_token，如果不跟认证服务器说好，认证服务器怎么给呢？
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  8, 2016  3:34 PM">2016年8月 8日 15:34</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-361976">#</a>
 | <a href="#comment-text" title="引用路人丁的这条留言" onclick="return CommentQuote('comment-quote-361976','路人丁');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-361991" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-text" href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-text" target="_blank" rel="nofollow">路任戊</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-361991">
            <blockquote>
<pre>引用路人乙的发言：</pre>

<p></p>

<p>看新浪，腾讯的OAuth方案，客户端接入是需要申请，经过服务提供商审核的（会发放 client_id, cilent_secret），如果假冒一个钓鱼网站的话，审核是很有可能不通过的，甚至自己坑自己。<br />
（当然审核可能不一定100%杜绝）</p>

<p><br />
</p></blockquote>

<p>楼上好像误解了别人的问题，jucelin的意思是一个网站提供例如新浪微博登陆，在引导用户到新浪认证时，其实时引导到一个虚假的地址。所以审核没用啊。<br />
我觉得OAuth2.0对这个问题无解，因为如果既然会构造虚假地址，证明客户端就是一个危险站点。他能够引诱用户访问基本就成功了<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  8, 2016  6:56 PM">2016年8月 8日 18:56</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-361991">#</a>
 | <a href="#comment-text" title="引用路任戊的这条留言" onclick="return CommentQuote('comment-quote-361991','路任戊');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-363046" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Jim</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-363046">
            <blockquote>
<pre>引用popwar的发言：</pre>

<p>有些解释不够详细，看看这个tutorial更容易理解http://tutorials.jenkov.com/oauth2/index.html</p>

</blockquote>

<p>看了这个链接，理解更加深刻!</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August 24, 2016  3:55 PM">2016年8月24日 15:55</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-363046">#</a>
 | <a href="#comment-text" title="引用Jim的这条留言" onclick="return CommentQuote('comment-quote-363046','Jim');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-363772" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">qihaiyan</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-363772">
            <p>（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。</p>

<p>（E）资源服务器返回一个网页，其中包含的代码可以获取Hash值中的令牌。</p>

<p>implicit模式中这2行解释描述好像有问题，按照图中的说明，“浏览器向资源服务器发出请求”，应该是浏览器向客户端的web服务器发出请求，而不是向资源服务器发出请求。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September  4, 2016 12:50 PM">2016年9月 4日 12:50</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-363772">#</a>
 | <a href="#comment-text" title="引用qihaiyan的这条留言" onclick="return CommentQuote('comment-quote-363772','qihaiyan');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-364449" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">大庆</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-364449">
            <p>阮老师能不能形象的讲一下 OAuth，AspNetIdentity，OWin，IdentityServer3这四个的关系？以及OAuth的四种模式分别适合在什么场景下使用？一直比较迷糊，求解惑，谢谢</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 14, 2016 12:27 AM">2016年9月14日 00:27</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-364449">#</a>
 | <a href="#comment-text" title="引用大庆的这条留言" onclick="return CommentQuote('comment-quote-364449','大庆');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-365376" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.lihancong.cn" href="http://www.lihancong.cn" target="_blank" rel="nofollow">tony</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-365376">
            <p>很清晰, 有参考价值</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 28, 2016  9:25 PM">2016年9月28日 21:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-365376">#</a>
 | <a href="#comment-text" title="引用tony的这条留言" onclick="return CommentQuote('comment-quote-365376','tony');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-367130" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://rabondai.github.io" href="http://rabondai.github.io" target="_blank" rel="nofollow">Rabon</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-367130">
            <p>真是简洁明了，通俗易懂啊，谢谢博主分享。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 26, 2016  3:40 PM">2016年10月26日 15:40</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-367130">#</a>
 | <a href="#comment-text" title="引用Rabon的这条留言" onclick="return CommentQuote('comment-quote-367130','Rabon');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-369616" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">ww</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-369616">
            <p>一口气看完，第一感觉是，恩，似乎明白了，OAuth大概就是这样的东西啊！<br />
但是回顾一遍，很多细节还是不明所以，而且持续想不通。</p>

<p><br />
1、在第六章，授权码模式（authorization code）中，<br />
   先从通过“用户授权操作”得到了“认证码（Auth Code）”，<br />
   然后再用“认证码（Auth Code）”换取到了“令牌（Token）”，<br />
   为什么要分2步呢？直接通过“授权”取得“令牌”不就行了？</p>

<p>2、取到“令牌（Token）”的用途，是用它来“识别用户”并获取信息，<br />
   而且令牌又基本是明文传输的，<br />
   假设我无意中看到了其他用户的令牌，是不是可以直接拿来用呢？<br />
   难道不担心令牌被“冒用”吗？</p>

<p>求解惑。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  2, 2016  4:37 PM">2016年12月 2日 16:37</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-369616">#</a>
 | <a href="#comment-text" title="引用ww的这条留言" onclick="return CommentQuote('comment-quote-369616','ww');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-369933" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Pumpkin</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-369933">
            <p>可参考：<br />
<a href="http://bitoftech.net/2014/06/01/token-based-authentication-asp-net-web-api-2-owin-asp-net-identity/" rel="nofollow">http://bitoftech.net/2014/06/01/token-based-authentication-asp-net-web-api-2-owin-asp-net-identity/</a><br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  7, 2016  6:11 AM">2016年12月 7日 06:11</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-369933">#</a>
 | <a href="#comment-text" title="引用Pumpkin的这条留言" onclick="return CommentQuote('comment-quote-369933','Pumpkin');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-369978" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://yudu.tech" href="http://yudu.tech" target="_blank" rel="nofollow">鱼肚</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-369978">
            <p>（D）客户端收到授权码，附上早先的"重定向URI"，向认证服务器申请令牌。这一步是在客户端的后台的服务器上完成的，对用户不可见。</p>

<p>在 【六、授权码模式】 中的这段翻译有误，原文中是说附上早先的授权码。这一步设置的重定向URI不一定非要和早先的相一致。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  7, 2016 11:45 AM">2016年12月 7日 11:45</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-369978">#</a>
 | <a href="#comment-text" title="引用鱼肚的这条留言" onclick="return CommentQuote('comment-quote-369978','鱼肚');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-369982" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://yudu.tech" href="http://yudu.tech" target="_blank" rel="nofollow">鱼肚</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-369982">
            <p>@ww：</p>

<p>关于为什么要多一步授权码的解释：http://stackoverflow.com/questions/13387698/why-is-there-an-authorization-code-flow-in-oauth2-when-implicit-flow-works-s</p>

<p>简单来说，是因为HTTP重定向没有body，只能通过url传参数，而url中的参数是不安全的，因为所有经过的路由器或服务器都能读取到url的信息，所谓的中间人攻击。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  7, 2016 11:50 AM">2016年12月 7日 11:50</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-369982">#</a>
 | <a href="#comment-text" title="引用鱼肚的这条留言" onclick="return CommentQuote('comment-quote-369982','鱼肚');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-370469" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://yudu.tech" href="http://yudu.tech" target="_blank" rel="nofollow">鱼肚</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-370469">
            <blockquote>
<pre>引用鱼肚的发言：</pre>

<p>（D）客户端收到授权码，附上早先的"重定向URI"，向认证服务器申请令牌。这一步是在客户端的后台的服务器上完成的，对用户不可见。</p>

<p>在 【六、授权码模式】 中的这段翻译有误，原文中是说附上早先的授权码。这一步设置的重定向URI不一定非要和早先的相一致。</p>

</blockquote>

<p>自己给自己打脸。关于这段是我之前理解有误，请求access_token时确实需要早先的redirect_uri,以便服务器校验code和redirect_uri是否是一对<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 16, 2016 10:34 AM">2016年12月16日 10:34</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-370469">#</a>
 | <a href="#comment-text" title="引用鱼肚的这条留言" onclick="return CommentQuote('comment-quote-370469','鱼肚');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-372332" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://terence-mak.blogspot.com" href="http://terence-mak.blogspot.com" target="_blank" rel="nofollow">Terence Mak</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-372332">
            <p>很感謝你的阮大大的文章，看了好多網路上的文章沒有看得太懂，看完你的終於明白了，特意說聲謝謝 :)</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February  2, 2017  3:59 PM">2017年2月 2日 15:59</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-372332">#</a>
 | <a href="#comment-text" title="引用Terence Mak的这条留言" onclick="return CommentQuote('comment-quote-372332','Terence Mak');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-372370" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://aryablog.xyz" href="http://aryablog.xyz" target="_blank" rel="nofollow">Arya</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-372370">
            <p>在研究 Google API 的时候，关于授权部分有一些疑惑，感谢您的博文。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February  5, 2017  2:33 PM">2017年2月 5日 14:33</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-372370">#</a>
 | <a href="#comment-text" title="引用Arya的这条留言" onclick="return CommentQuote('comment-quote-372370','Arya');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-372669" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">清风</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-372669">
            <p>第六节 授权码模式，D步骤的例子中没有client_id参数，与描述中的“必选项”矛盾？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February 10, 2017  4:11 PM">2017年2月10日 16:11</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-372669">#</a>
 | <a href="#comment-text" title="引用清风的这条留言" onclick="return CommentQuote('comment-quote-372669','清风');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-374499" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.lysqdx.com/drugInterdiction/index.php" href="http://www.lysqdx.com/drugInterdiction/index.php" target="_blank" rel="nofollow">grayVTouch</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-374499">
            <p>每一次不小心浏览到阮大神的博客，都会被其提供的干货好文吸引！这样的文章越多越好，支持 阮sir</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 11, 2017  2:53 PM">2017年3月11日 14:53</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-374499">#</a>
 | <a href="#comment-text" title="引用grayVTouch的这条留言" onclick="return CommentQuote('comment-quote-374499','grayVTouch');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-374691" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.cnblogs.com/etata/" href="http://www.cnblogs.com/etata/" target="_blank" rel="nofollow">etata</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-374691">
            <p>简单来说就是</p>

<p>在第三方服务那里，  加一个链接，链到服务器，在服务器输入账号密码之后， 服务器返给你一个   字符串  也就是授权码或者token之类都可以。然后拿着第三方服务拿着这个授权码 和服务器进行通信。<br />
这个保护服务器上的账号密码，避免被过多的曝光，减少风险。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 14, 2017  9:44 AM">2017年3月14日 09:44</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-374691">#</a>
 | <a href="#comment-text" title="引用etata的这条留言" onclick="return CommentQuote('comment-quote-374691','etata');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-375325" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小鱼</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-375325">
            <p>讲句真的，我估计我蠢笨啊，愣是觉得看不懂，还有没看明白为啥</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 23, 2017 12:57 PM">2017年3月23日 12:57</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-375325">#</a>
 | <a href="#comment-text" title="引用小鱼的这条留言" onclick="return CommentQuote('comment-quote-375325','小鱼');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-375461" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">xwei</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-375461">
            <p>@鱼肚：</p>

<p>而且code就可以不需要保密了，因为code是一次性的，只要用过一次就失效了，即使中间人拿到code也不能获取access_token，因为还需要client_id和client_secret，而这些信息是在资源服务器保存的。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 26, 2017 11:15 AM">2017年3月26日 11:15</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-375461">#</a>
 | <a href="#comment-text" title="引用xwei的这条留言" onclick="return CommentQuote('comment-quote-375461','xwei');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-376408" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">gink</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-376408">
            <blockquote>
<pre>引用newnius的发言：</pre>

<p></p>

<p>这个token可以是惟一的，也就是说，token唯一确定一个用户，像@feiniu5566 说的，客户端可以通过令牌请求用户信息，包括userid，所以没有必要额外发送。</p>

</blockquote>

<p>token 是第三方服务器向授权服务器用 code 获取的,那么授权服务器是怎么知道这个code是哪个用户授权的？<br />
code也是唯一的，而且关联了用户？如果是这样，应该就不存在什么CSRF攻击</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 18, 2017 10:25 AM">2017年4月18日 10:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-376408">#</a>
 | <a href="#comment-text" title="引用gink的这条留言" onclick="return CommentQuote('comment-quote-376408','gink');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-376715" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">normalhefei</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-376715">
            <p>想问一下授权码模式中，为什么要有一个授权码？多一个来回？ 为什么不直接返回一个token？ </p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 27, 2017 12:40 PM">2017年4月27日 12:40</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-376715">#</a>
 | <a href="#comment-text" title="引用normalhefei的这条留言" onclick="return CommentQuote('comment-quote-376715','normalhefei');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-376803" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">KS</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-376803">
            <blockquote>
<pre>引用normalhefei的发言：</pre>

<p>想问一下授权码模式中，为什么要有一个授权码？多一个来回？ 为什么不直接返回一个token？ </p>

</blockquote>

<p>想真正了解OAUTH得多看看，这篇文章说是流水账也不为过，讲了一堆，只能让人了解了What和省略了很多细节How，至于评论中的一大堆Why就没有说明了。感觉典型的挖坑文章，挖完坑不填有时候还不如不挖。</p>

<p>ok，回到你的问题：服务器返回的授权码是一个客户端用于请求真正的accessToken的ticket。<br />
为什么这么干：<br />
因为服务器此时只是完成了：确认用户授权，但是至于用户确认授权的是不是真正clientId代表的app还不确定？<br />
因为clientId那玩意公开的，用户都知道，所以如果我知道了clientId，我可以说我是你。<br />
所以不安全，要做第二次验证。 第二次验证的就是在客户端后台完成的了，它得把clientId连同clientCredentail（secrectKey或者说密码）再加上获得的AuthorizationCode发给服务器做验证。<br />
这才能获取最终使用的accessToken。<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May  1, 2017 11:18 AM">2017年5月 1日 11:18</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-376803">#</a>
 | <a href="#comment-text" title="引用KS的这条留言" onclick="return CommentQuote('comment-quote-376803','KS');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-376804" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">KS</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-376804">
            <p>@ww：</p>

<p>第一个问题估计你知道答案了。</p>

<p>第二个问题是一个good point,答案是：所以不能用http，只能用https。参见 RFC6749:https://tools.ietf.org/html/rfc6749<br />
   Since requests to the authorization endpoint result in user<br />
   authentication and the transmission of clear-text credentials (in the<br />
   HTTP response), the authorization server MUST require the use of TLS<br />
   as described in Section 1.6 when sending requests to the<br />
   authorization endpoint.<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May  1, 2017 11:34 AM">2017年5月 1日 11:34</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-376804">#</a>
 | <a href="#comment-text" title="引用KS的这条留言" onclick="return CommentQuote('comment-quote-376804','KS');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-376840" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://没有" href="http://没有" target="_blank" rel="nofollow">Victor</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-376840">
            <p>看了这个文档，懂得了什么是auth2，但是对于JAVA中如何能够应用到项目中呢？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May  2, 2017  9:42 PM">2017年5月 2日 21:42</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-376840">#</a>
 | <a href="#comment-text" title="引用Victor的这条留言" onclick="return CommentQuote('comment-quote-376840','Victor');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-378015" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">gs</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-378015">
            <p>非常好的文章。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 16, 2017  5:54 PM">2017年6月16日 17:54</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-378015">#</a>
 | <a href="#comment-text" title="引用gs的这条留言" onclick="return CommentQuote('comment-quote-378015','gs');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-378480" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.cqkd6381.com" href="http://www.cqkd6381.com" target="_blank" rel="nofollow">刘伟</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-378480">
            <p>有看不明白的可以去慕课网上看看这个课程，更容易明白<br />
<a href="http://www.imooc.com/learn/557" rel="nofollow">http://www.imooc.com/learn/557</a></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July  5, 2017  9:43 AM">2017年7月 5日 09:43</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-378480">#</a>
 | <a href="#comment-text" title="引用刘伟的这条留言" onclick="return CommentQuote('comment-quote-378480','刘伟');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-378551" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">w666</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-378551">
            <p>在“客户端模式”和“更新令牌”章节中，我发现写的是"grantType","clientcredentials","refreshtoken",看代码结果是"grant_type","client_credentials","refresh_token"，这是作者不小心写错了还是说是一种书写约定，请问</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July  7, 2017 11:42 AM">2017年7月 7日 11:42</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-378551">#</a>
 | <a href="#comment-text" title="引用w666的这条留言" onclick="return CommentQuote('comment-quote-378551','w666');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-378772" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">cdy</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-378772">
            <p>redirecturl在授权码模式中a和e中可以不一样的吧，这两个地方的 url？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="July 19, 2017  9:07 AM">2017年7月19日 09:07</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-378772">#</a>
 | <a href="#comment-text" title="引用cdy的这条留言" onclick="return CommentQuote('comment-quote-378772','cdy');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-379238" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Kolin</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-379238">
            <p>完全没有任何头绪，一点都看不懂</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  4, 2017  2:15 PM">2017年8月 4日 14:15</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-379238">#</a>
 | <a href="#comment-text" title="引用Kolin的这条留言" onclick="return CommentQuote('comment-quote-379238','Kolin');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-379338" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Lwr</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-379338">
            <p>意思是懂了，具体怎么实现的还需要多加学习。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  8, 2017 11:50 AM">2017年8月 8日 11:50</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-379338">#</a>
 | <a href="#comment-text" title="引用Lwr的这条留言" onclick="return CommentQuote('comment-quote-379338','Lwr');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-379346" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">jast</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-379346">
            <p>请问：<br />
七、简化模式<br />
简化模式（implicit grant type）不通过第三方应用程序的服务器，直接在浏览器中向认证服务器申请令牌，跳过了"授权码"这个步骤，因此得名。所有步骤在浏览器中完成，令牌对访问者是可见的，且客户端不需要认证。<br />
中的：</p>

<p>（B）用户决定是否给于客户端授权。</p>

<p>这个用户怎么决定？用户是否需要登入？</p>

<p>还有：这种模式需不需要第三方应用程序的服务器登入用户（即输入用户名密码）？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August  8, 2017  4:54 PM">2017年8月 8日 16:54</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-379346">#</a>
 | <a href="#comment-text" title="引用jast的这条留言" onclick="return CommentQuote('comment-quote-379346','jast');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-379632" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.weillp0.com" href="http://www.weillp0.com" target="_blank" rel="nofollow">Chova</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-379632">
            <blockquote>
<pre>引用路任戊的发言：</pre>

<p>楼上好像误解了别人的问题，jucelin的意思是一个网站提供例如新浪微博登陆，在引导用户到新浪认证时，其实时引导到一个虚假的地址。所以审核没用啊。<br />
我觉得OAuth2.0对这个问题无解，因为如果既然会构造虚假地址，证明客户端就是一个危险站点。他能够引诱用户访问基本就成功了</p>

<p><br />
</p></blockquote>

<p>没看见state这个参数吗？这个就是防止虚假链接的</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August 18, 2017 11:41 AM">2017年8月18日 11:41</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-379632">#</a>
 | <a href="#comment-text" title="引用Chova的这条留言" onclick="return CommentQuote('comment-quote-379632','Chova');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-380088" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">兰兰同学</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-380088">
            <p>该篇文章里的authorization server翻译成中文难道不应该是授权服务器吗？认证服务器应该是authentication server才对吧？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September  6, 2017  2:57 PM">2017年9月 6日 14:57</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-380088">#</a>
 | <a href="#comment-text" title="引用兰兰同学的这条留言" onclick="return CommentQuote('comment-quote-380088','兰兰同学');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-380266" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Chappie</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-380266">
            <blockquote>
<pre>引用qihaiyan的发言：</pre>

<p>（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。</p>

<p>（E）资源服务器返回一个网页，其中包含的代码可以获取Hash值中的令牌。</p>

<p>implicit模式中这2行解释描述好像有问题，按照图中的说明，“浏览器向资源服务器发出请求”，应该是浏览器向客户端的web服务器发出请求，而不是向资源服务器发出请求。</p>

</blockquote>

<p>万分感谢，看了好久没看明白，看到你的解释终于明白了，应该是向客户端web服务器发出请求，获取从urlHash的js应该客户端做处理</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 11, 2017  6:18 PM">2017年9月11日 18:18</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-380266">#</a>
 | <a href="#comment-text" title="引用Chappie的这条留言" onclick="return CommentQuote('comment-quote-380266','Chappie');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-380302" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">丘彪</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-380302">
            <p>谢谢阮老师，清晰讲解。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 12, 2017 11:30 AM">2017年9月12日 11:30</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-380302">#</a>
 | <a href="#comment-text" title="引用丘彪的这条留言" onclick="return CommentQuote('comment-quote-380302','丘彪');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-380575" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">lll</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-380575">
            <p>写的也没多清晰 里面那么多回调uri, 都没说清楚到底 都是回调哪儿的</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 18, 2017  3:56 PM">2017年9月18日 15:56</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-380575">#</a>
 | <a href="#comment-text" title="引用lll的这条留言" onclick="return CommentQuote('comment-quote-380575','lll');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-381568" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="https://blog.fedt.xin" href="https://blog.fedt.xin" target="_blank" rel="nofollow">Chuck</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-381568">
            <p>一堆的用户，客户端等别名让这篇文章看起来非常费劲。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 23, 2017 12:19 AM">2017年10月23日 00:19</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-381568">#</a>
 | <a href="#comment-text" title="引用Chuck的这条留言" onclick="return CommentQuote('comment-quote-381568','Chuck');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-381604" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">菠萝</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-381604">
            <p>（A）用户访问客户端，后者将前者导向认证服务器。<br />
（B）用户选择是否给予客户端授权。<br />
（C）假设用户给予授权，认证服务器将用户导向客户端事先指定的"重定向URI"（redirection URI），同时附上一个token令牌。<br />
（D）客户端收到token令牌，向认证服务器发起查询请求。这一步是在客户端的后台的服务器上完成的，对用户不可见。<br />
（E）认证服务器核对了token令牌，确认有效期内后，向客户端返回用户信息</p>

<p>请问老师，这是哪一种模式啊？ 电信的天翼帐号开放平台好像就是这个流程。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 23, 2017  5:17 PM">2017年10月23日 17:17</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-381604">#</a>
 | <a href="#comment-text" title="引用菠萝的这条留言" onclick="return CommentQuote('comment-quote-381604','菠萝');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-381632" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">大新哥</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-381632">
            <p>您好，各位大神们，（搭建OAuth2.0标准的授权服务器+REST资源服务器，并提供用户注册服务和REST资源访问接口。）这个怎么去实现啊</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 24, 2017  3:54 PM">2017年10月24日 15:54</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-381632">#</a>
 | <a href="#comment-text" title="引用大新哥的这条留言" onclick="return CommentQuote('comment-quote-381632','大新哥');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-381824" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">smallriver</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-381824">
            <p>@喵喵：</p>

<p>这个回答为啥需要授权码而不是直接返回access_token基本是正确的，但是我觉得有两点可能不太对。第一点是说授权服务器返回302带上授权码是http的，这个不对，因为请求授权的接口本身可以是https的，返回302自然也就不会被窃取看到。第二点是用授权码获取access_token接口不一定强制要求是https的，有clientSecret做加密足以区分非法用户。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 30, 2017 10:43 PM">2017年10月30日 22:43</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-381824">#</a>
 | <a href="#comment-text" title="引用smallriver的这条留言" onclick="return CommentQuote('comment-quote-381824','smallriver');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-381825" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">smallriver</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-381825">
            <blockquote>
<pre>引用KS的发言：</pre>

<p></p>

<p>想真正了解OAUTH得多看看，这篇文章说是流水账也不为过，讲了一堆，只能让人了解了What和省略了很多细节How，至于评论中的一大堆Why就没有说明了。感觉典型的挖坑文章，挖完坑不填有时候还不如不挖。</p>

<p>ok，回到你的问题：服务器返回的授权码是一个客户端用于请求真正的accessToken的ticket。<br />
为什么这么干：<br />
因为服务器此时只是完成了：确认用户授权，但是至于用户确认授权的是不是真正clientId代表的app还不确定？<br />
因为clientId那玩意公开的，用户都知道，所以如果我知道了clientId，我可以说我是你。<br />
所以不安全，要做第二次验证。 第二次验证的就是在客户端后台完成的了，它得把clientId连同clientCredentail（secrectKey或者说密码）再加上获得的AuthorizationCode发给服务器做验证。<br />
这才能获取最终使用的accessToken。</p>

<p><br />
</p></blockquote>

<p>KS说的挺好的，这篇文章属于总体上告诉你oauth2.0有哪几个步骤，有个基本认识而已。至于细节，还需要去看原文档。</p>

<p>关于为啥要引入授权码这一步，刚开始我也没太理解，看了KS的解释才瞬间懂了。就是说，如果没有授权码这一步，授权服务器在用户授权后直接返回accessToken，那会发生什么呢？就是随便一个客户端都可以把用户引导到授权页面，然后拿到accessToken去资源服务器玩了。因此，为了防止这种情况发生，在发放accessToken时，必须确定该客户端是在授权服务器这边注册过的（一般注册过会发放clientId&clientSecret），所以引入授权码这步，让客户端带上双方约定好的clientSecret，确认无误再发放accessToken，这才保证了安全。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="October 30, 2017 11:18 PM">2017年10月30日 23:18</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-381825">#</a>
 | <a href="#comment-text" title="引用smallriver的这条留言" onclick="return CommentQuote('comment-quote-381825','smallriver');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-382281" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">张三</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-382281">
            <p>为啥要用accessToken去获取clientId和userId   然后再用clientId和userId去调被授权服务器接口  我直接用accessToken不是也可以吗？没看懂这一步的作用</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 13, 2017  6:07 PM">2017年11月13日 18:07</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-382281">#</a>
 | <a href="#comment-text" title="引用张三的这条留言" onclick="return CommentQuote('comment-quote-382281','张三');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-382378" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.klinlee.com" href="http://www.klinlee.com" target="_blank" rel="nofollow">l33klin</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-382378">
            <p>讲得通俗易懂，谢谢博主！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 16, 2017 11:53 AM">2017年11月16日 11:53</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-382378">#</a>
 | <a href="#comment-text" title="引用l33klin的这条留言" onclick="return CommentQuote('comment-quote-382378','l33klin');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-382844" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">jason</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-382844">
            <p>我有几个问题，关于“隐式授权”的。</p>

<p><br />
1. 既然授权服务器已经把access token（不是授权token）发给agent了，为什么agent非要去取一个script解析access token，然后才能转发给client呢？授权服务器是故意给了一个“间接的”access token吗？这样设计的好处是什么呢？为什么没有直接给一个完整的access token，然后agent直接把token发给client不就行了吗？</p>

<p>2. 根据6749，implicit方式中，script是取自“web-hosted client resource”，我认为，既然是“web-hosted”，那么就不应该是“client”自己了。client有可能是本地应用。这个理解对吗？那个解析的script，为什么是“client”这边提供，而不是授权服务器这边提供呢？如果是client提供，那么完全可以把服务器发过来的完整的access token发过去，script的执行直接在client上就可以了，为什么非要取回到agent里面去执行呢？</p>

<p><br />
oauth 2.0协议，感觉第一种实现方式非常严密，这种隐式的实现，总是感觉不够严密，但是不能理解为什么这样设计。</p>

<p><br />
再次感谢提供这么好的解析，提前谢过您对我问题的答疑。</p>

<p><br />
谢谢。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 30, 2017 11:03 AM">2017年11月30日 11:03</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-382844">#</a>
 | <a href="#comment-text" title="引用jason的这条留言" onclick="return CommentQuote('comment-quote-382844','jason');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-384024" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">李雨泽</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-384024">
            <p>请问一个问题，假如我现在有个门户网站，然后集成了一个论坛子系统，包括了论坛客户端以及论坛api服务，现在情况是论坛的客户端想调用论坛的api服务，那么就需要进行用户的身份验证以及论坛的客户端的身份验证。论坛客户端在这里能否理解成第三方应用？？？这种情况是否也适合使用oauth2?或者说使用于哪一种授权模式？期待你的回复</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January  3, 2018  6:37 PM">2018年1月 3日 18:37</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-384024">#</a>
 | <a href="#comment-text" title="引用李雨泽的这条留言" onclick="return CommentQuote('comment-quote-384024','李雨泽');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-384763" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">阿蒙</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-384763">
            <blockquote>
<pre>引用兰兰同学的发言：</pre>

<p>该篇文章里的authorization server翻译成中文难道不应该是授权服务器吗？认证服务器应该是authentication server才对吧？</p>

</blockquote>

<p>读的时候也发现这个问题了，看了看评论，果然有前辈提到这点。原文中也是一会儿“认证服务器”，一会儿“授权服务器”的。信息安全中“认证”和“授权”区分的贼清楚。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 19, 2018 10:21 PM">2018年1月19日 22:21</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-384763">#</a>
 | <a href="#comment-text" title="引用阿蒙的这条留言" onclick="return CommentQuote('comment-quote-384763','阿蒙');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-384779" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Rayleigh</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-384779">
            <p>怎么实现在token有效期内，client可以在user第二次连接时候，避免再次授权。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 20, 2018 12:31 PM">2018年1月20日 12:31</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-384779">#</a>
 | <a href="#comment-text" title="引用Rayleigh的这条留言" onclick="return CommentQuote('comment-quote-384779','Rayleigh');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-385490" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">adi</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-385490">
            <p>access_token由谁负责写入用户浏览器cookie中的</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February  4, 2018  9:54 AM">2018年2月 4日 09:54</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-385490">#</a>
 | <a href="#comment-text" title="引用adi的这条留言" onclick="return CommentQuote('comment-quote-385490','adi');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-385491" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">adi</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-385491">
            <blockquote>
<pre>引用Rayleigh的发言：</pre>

<p>怎么实现在token有效期内，client可以在user第二次连接时候，避免再次授权。</p>

</blockquote>

<p>token已经写入到用户浏览器的cookie了，当用户第二次访问连接子系统的时候，会将该cookie带上来。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February  4, 2018  9:56 AM">2018年2月 4日 09:56</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-385491">#</a>
 | <a href="#comment-text" title="引用adi的这条留言" onclick="return CommentQuote('comment-quote-385491','adi');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-385604" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://1thx.com" href="http://1thx.com" target="_blank" rel="nofollow">落舞者</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-385604">
            <p>根据 <a href="https://tools.ietf.org/html/rfc6749#page-17" rel="nofollow">https://tools.ietf.org/html/rfc6749#page-17</a> 协议 发现其中 更新令牌（Refresh Tokens） 章节  与 rfc6749描述 稍有出入<br />
其中例子 中多带两个参数client_id和client_secret 本文中没有涉及<br />
     POST /token HTTP/1.1<br />
     Host: server.example.com<br />
     Content-Type: application/x-www-form-urlencoded</p>

<p>     grant_type=refresh_token&refresh_token=tGzv3JOkF0XG5Qx2TlKWIA<br />
     &client_id=s6BhdRkqt3&client_secret=7Fjfp0ZBr1KtDRbnfVdmIw</p>

<p>rfc6749具体描述：</p>

<p>Refresh tokens MUST be kept confidential in transit and storage, and<br />
   shared only among the authorization server and the client to whom the<br />
   refresh tokens were issued.  The authorization server MUST maintain<br />
   the binding between a refresh token and the client to whom it was<br />
   issued.  Refresh tokens MUST only be transmitted using TLS as<br />
   described in Section 1.6 with server authentication as defined by<br />
   [RFC2818].</p>

<p><a href="https://tools.ietf.org/html/rfc6749#page-55" rel="nofollow">https://tools.ietf.org/html/rfc6749#page-55</a></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February  6, 2018  7:19 PM">2018年2月 6日 19:19</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-385604">#</a>
 | <a href="#comment-text" title="引用落舞者的这条留言" onclick="return CommentQuote('comment-quote-385604','落舞者');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-385920" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://iforl.com" href="http://iforl.com" target="_blank" rel="nofollow">F</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-385920">
            <p>为什么将 implicit grant type 翻译为“简化模式”？理解为“隐式模式”不是更贴切吗？是不是将<br />
 implicit 看成 simplicity 了？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February 24, 2018  4:46 PM">2018年2月24日 16:46</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-385920">#</a>
 | <a href="#comment-text" title="引用F的这条留言" onclick="return CommentQuote('comment-quote-385920','F');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-386362" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Bradley</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-386362">
            <p>老师有一点不明：<br />
（A）用户打开客户端以后，客户端要求用户给予授权。</p>

<p>（B）用户同意给予客户端授权。<br />
接着您又强调了关键在于B，即用户如何给予客户端授权<br />
但是接下来你并没有介绍这一块，而是直接跨过去从客户端如何用URI请求授权码开始了。。。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March  5, 2018  3:46 PM">2018年3月 5日 15:46</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-386362">#</a>
 | <a href="#comment-text" title="引用Bradley的这条留言" onclick="return CommentQuote('comment-quote-386362','Bradley');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-386684" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://blog.csdn.net/Primary_wind" href="http://blog.csdn.net/Primary_wind" target="_blank" rel="nofollow">primary</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-386684">
            <p>赞！简洁易懂，现在各大开放平台采用的都是oauth2.0授权码模式!</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 13, 2018  8:13 PM">2018年3月13日 20:13</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-386684">#</a>
 | <a href="#comment-text" title="引用primary的这条留言" onclick="return CommentQuote('comment-quote-386684','primary');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-386744" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">我的大名</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-386744">
            <blockquote>
<pre>引用Bradley的发言：</pre>

<p>老师有一点不明：<br />
（A）用户打开客户端以后，客户端要求用户给予授权。</p>

<p>（B）用户同意给予客户端授权。<br />
接着您又强调了关键在于B，即用户如何给予客户端授权<br />
但是接下来你并没有介绍这一块，而是直接跨过去从客户端如何用URI请求授权码开始了。。。</p>

</blockquote>

<p>授权码由认证服务器生成，客户端将通过浏览器跳转将用户导向认证服务器相关URI地址并在URI地址上附带客户端相关参数和redirect_uri，在用户登录选择相关授权后,认证服务器通过浏览器跳转将用户导向redirect_uri,并附带上授权码，浏览器访问这个uri，这个uri指向客户端的服务器，客户端服务器拦截浏览器请求获取到授权码。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 16, 2018  2:42 PM">2018年3月16日 14:42</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-386744">#</a>
 | <a href="#comment-text" title="引用我的大名的这条留言" onclick="return CommentQuote('comment-quote-386744','我的大名');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-387739" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.ioio.pw" href="http://www.ioio.pw" target="_blank" rel="nofollow">heropoo</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-387739">
            <p>赞！写的很详细</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April  9, 2018 11:09 AM">2018年4月 9日 11:09</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-387739">#</a>
 | <a href="#comment-text" title="引用heropoo的这条留言" onclick="return CommentQuote('comment-quote-387739','heropoo');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-388110" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">toccata</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-388110">
            <p>看了其他介绍oauth2.0的10篇文章，不如大牛的一篇文章。</p>

<p>看完豁然开朗。而之前看的其他几篇博客文章，我完全没发现他们讲的是同一个东西。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 19, 2018  3:34 PM">2018年4月19日 15:34</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-388110">#</a>
 | <a href="#comment-text" title="引用toccata的这条留言" onclick="return CommentQuote('comment-quote-388110','toccata');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-388289" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.sowork(undefined).com" href="http://www.sowork(undefined).com" target="_blank" rel="nofollow">sowork</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-388289">
            <blockquote>
<pre>引用李先森的发言：</pre>

<p>不太明白 为什么使用auth_code换取access_token的时候 还要传redirect_uri</p>

</blockquote>

<p>可能是判断auth_code真伪需要这些参数</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 26, 2018  2:25 PM">2018年4月26日 14:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-388289">#</a>
 | <a href="#comment-text" title="引用sowork的这条留言" onclick="return CommentQuote('comment-quote-388289','sowork');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-388293" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">sowork</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-388293">
            <p>简化模式defg操作可以省略</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 26, 2018  4:17 PM">2018年4月26日 16:17</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-388293">#</a>
 | <a href="#comment-text" title="引用sowork的这条留言" onclick="return CommentQuote('comment-quote-388293','sowork');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-388294" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">sowork</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-388294">
            <blockquote>
<pre>引用sowork的发言：</pre>

<p>简化模式defg操作可以省略</p>

</blockquote>

<p>或者说通常情况下不需要，如果想实现类似微信jssdk的功能，就和上面的流程对上了！！！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 26, 2018  4:31 PM">2018年4月26日 16:31</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-388294">#</a>
 | <a href="#comment-text" title="引用sowork的这条留言" onclick="return CommentQuote('comment-quote-388294','sowork');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-388324" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">沈林楠</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-388324">
            <p>知道了上面这些名词，就不难理解，OAuth的作用就是让"客户端"安全可控地获取"用户"的授权，与"服务商提供商"进行互动。<br />
这里的"服务商提供商"多了一个商字</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 27, 2018  4:43 PM">2018年4月27日 16:43</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-388324">#</a>
 | <a href="#comment-text" title="引用沈林楠的这条留言" onclick="return CommentQuote('comment-quote-388324','沈林楠');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-388960" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">matt</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-388960">
            <p>太感謝分享了！！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 17, 2018  1:21 PM">2018年5月17日 13:21</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-388960">#</a>
 | <a href="#comment-text" title="引用matt的这条留言" onclick="return CommentQuote('comment-quote-388960','matt');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-389442" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">abc</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-389442">
            <p>请问OAuth1 和 OAuth2 区别。 怎么选择?</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June  6, 2018  3:11 PM">2018年6月 6日 15:11</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-389442">#</a>
 | <a href="#comment-text" title="引用abc的这条留言" onclick="return CommentQuote('comment-quote-389442','abc');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-389935" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.zixisi.cn" href="http://www.zixisi.cn" target="_blank" rel="nofollow">ring</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-389935">
            <p>authorization server 更严谨的说法，应该是：授权服务器</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 20, 2018  3:36 PM">2018年6月20日 15:36</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-389935">#</a>
 | <a href="#comment-text" title="引用ring的这条留言" onclick="return CommentQuote('comment-quote-389935','ring');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-390372" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">romanliu</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-390372">
            <p>这篇文章太过程式化，建议读一读这篇 <a href="https://clickhelp.co/clickhelp-technical-writing-blog/how-does-single-sign-on-work-guide/" rel="nofollow">https://clickhelp.co/clickhelp-technical-writing-blog/how-does-single-sign-on-work-guide/</a></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June 29, 2018  4:40 PM">2018年6月29日 16:40</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-390372">#</a>
 | <a href="#comment-text" title="引用romanliu的这条留言" onclick="return CommentQuote('comment-quote-390372','romanliu');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-393149" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.deepl.club" href="http://www.deepl.club" target="_blank" rel="nofollow">jack_chen</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-393149">
            <p>这些理解都是怎么来的呀。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 14, 2018  3:51 PM">2018年9月14日 15:51</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-393149">#</a>
 | <a href="#comment-text" title="引用jack_chen的这条留言" onclick="return CommentQuote('comment-quote-393149','jack_chen');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-394685" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">RexFang</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-394685">
            <p>应用场景章节部分，应该是来自官方 Example 里面的 README 吧？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November  3, 2018  4:41 PM">2018年11月 3日 16:41</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-394685">#</a>
 | <a href="#comment-text" title="引用RexFang的这条留言" onclick="return CommentQuote('comment-quote-394685','RexFang');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-394713" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">唐</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-394713">
            <p>非常好，感恩，从一个传统业务程序，忽然做这一块，对于oauth等技术不了解。花了2小时通读查阅，谢谢！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November  4, 2018  6:45 PM">2018年11月 4日 18:45</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-394713">#</a>
 | <a href="#comment-text" title="引用唐的这条留言" onclick="return CommentQuote('comment-quote-394713','唐');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-396338" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Honglim</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-396338">
            <p>Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</p>

<p>这个值怎么来的？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="November 30, 2018  5:24 PM">2018年11月30日 17:24</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-396338">#</a>
 | <a href="#comment-text" title="引用Honglim的这条留言" onclick="return CommentQuote('comment-quote-396338','Honglim');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-396547" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">石龙飞</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-396547">
            <p>我有一点最困惑，在这里举个例子说明一下：<br />
比如手机有一个APP（第三方应用，也就是client），用QQ登陆，在我们点击授权的时候是不是应该有两件事情发生呢？第一，给APP一个确认授权的信息，应该就是所谓的code吧，第二（重点），是不是QQ也会向QQ的服务器或者QQ的认证服务器发送一些信息，比如client_id、redirect_uri到code的映射。我的理解是这样QQ的认证服务器就有两方的信息了，当APP发送code给QQ认证服务器的时候，认证服务器把两个信息一核对，相同，那就给APP返回AccessToken。<br />
对于第一点，很多文章讲的清楚明白，但是第二点好像都没说，那么是不是我理解有问题呢？望指正</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  4, 2018  4:09 PM">2018年12月 4日 16:09</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-396547">#</a>
 | <a href="#comment-text" title="引用石龙飞的这条留言" onclick="return CommentQuote('comment-quote-396547','石龙飞');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-397072" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Sean</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-397072">
            <blockquote>
<pre>引用李先森的发言：</pre>

<p>不太明白 为什么使用auth_code换取access_token的时候 还要传redirect_uri</p>

</blockquote>

<p>因为授权页面是认证服务器的，如QQ：https://graph.qq.com/oauth2.0/show<br />
在这个页面授权后认证服务器要给你重定向回客户端</p>

<p>还有就是这个授权码是和redirect_uri对应的，防止被篡改成其他的网站。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 12, 2018 10:43 AM">2018年12月12日 10:43</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-397072">#</a>
 | <a href="#comment-text" title="引用Sean的这条留言" onclick="return CommentQuote('comment-quote-397072','Sean');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-397090" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Sean</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-397090">
            <blockquote>
<pre>引用helm的发言：</pre>

<p>阮老师，授权码模式中A步骤中的redirect_uri写的是可选项，D步骤说的是必选项，这里是不是有矛盾</p>

</blockquote>

<p>不矛盾，只是这篇文章没写，RFC6749 3.1.2.  Redirection Endpoint里写了，这个redirect_uri可以通过请求参数传给认证服务器，也可以在客户端在认证服务器注册的时候提前设置</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December 12, 2018 12:43 PM">2018年12月12日 12:43</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-397090">#</a>
 | <a href="#comment-text" title="引用Sean的这条留言" onclick="return CommentQuote('comment-quote-397090','Sean');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-402191" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.forever24.cn" href="http://www.forever24.cn" target="_blank" rel="nofollow">彭飞</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-402191">
            <p>第一次看，貌似懂了，然后实际使用的时候，感觉又似懂非懂，。现在是第3次来重新看过了。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 10, 2019  5:56 PM">2019年1月10日 17:56</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-402191">#</a>
 | <a href="#comment-text" title="引用彭飞的这条留言" onclick="return CommentQuote('comment-quote-402191','彭飞');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-405740" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">江雨舟</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-405740">
            <p>老师我有一个疑问，不是一开始就说OAuth2是授权而不是认证吗，但是为什么候来在解释具体步骤的时候，又把Authorization Server翻译成认证服务器了？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 21, 2019  3:25 PM">2019年1月21日 15:25</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-405740">#</a>
 | <a href="#comment-text" title="引用江雨舟的这条留言" onclick="return CommentQuote('comment-quote-405740','江雨舟');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-408237" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">陆凡</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-408237">
            <p>（5）Authorization server：认证服务器，即服务提供商专门用来处理认证的服务器。</p>

<p>这个是不是叫“授权服务器”更好一点，主要还是区分下Authorization 跟 Authentication.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="February 15, 2019 11:46 AM">2019年2月15日 11:46</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-408237">#</a>
 | <a href="#comment-text" title="引用陆凡的这条留言" onclick="return CommentQuote('comment-quote-408237','陆凡');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-409867" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://ganxunzou.com" href="http://ganxunzou.com" target="_blank" rel="nofollow">甘训奏</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-409867">
            <blockquote>
根据上面的D步骤，下一步浏览器会访问Location指定的网址，但是Hash部分不会发送。接下来的E步骤，服务提供商的资源服务器发送过来的代码，会提取出Hash中的令牌。

</blockquote>

<blockquote>
（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。
</blockquote>

<p>这里面的逻辑判断是浏览器做的吗？<br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 12, 2019 10:15 AM">2019年3月12日 10:15</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-409867">#</a>
 | <a href="#comment-text" title="引用甘训奏的这条留言" onclick="return CommentQuote('comment-quote-409867','甘训奏');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-410360" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.gaoji.ren" href="http://www.gaoji.ren" target="_blank" rel="nofollow">gaojiren</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-410360">
            <p>刚看了小区简化版，再来看完整版</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April  4, 2019  2:26 PM">2019年4月 4日 14:26</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-410360">#</a>
 | <a href="#comment-text" title="引用gaojiren的这条留言" onclick="return CommentQuote('comment-quote-410360','gaojiren');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-410731" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">胡</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-410731">
            <p>简化模式实在没看懂，（C）假设用户给予授权，认证服务器将用户导向客户端指定的"重定向URI"，并在URI的Hash部分包含了访问令牌。也就是浏览器被重定向到客户端指定的url了<br />
而文章中说（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。<br />
这里有点晕，浏览器不是应该去访问客户端指定的url了吗？为什么说浏览器向资源服务器发出请求了，浏览器是怎么知道资源服务器的url呢？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 22, 2019 10:28 PM">2019年4月22日 22:28</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-410731">#</a>
 | <a href="#comment-text" title="引用胡的这条留言" onclick="return CommentQuote('comment-quote-410731','胡');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-410788" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">瓦特</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-410788">
            <blockquote>
<pre>引用周梦康的发言：</pre>

<p>阮老师的文章都是精品，真正做到深入浅出。</p>

</blockquote>

<p>感觉还是比较抽象，每个步骤需要的参数的目的没有叙述；如果可以表述出来，正片文章就更加连贯了。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="April 24, 2019  2:01 PM">2019年4月24日 14:01</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-410788">#</a>
 | <a href="#comment-text" title="引用瓦特的这条留言" onclick="return CommentQuote('comment-quote-410788','瓦特');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-412722" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">weishang</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-412722">
            <p>一般来说，前后端分离项目可以用密码模式吧？前端直接使用用户信息，向后台索要授权。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="August 13, 2019 11:21 AM">2019年8月13日 11:21</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-412722">#</a>
 | <a href="#comment-text" title="引用weishang的这条留言" onclick="return CommentQuote('comment-quote-412722','weishang');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-413624" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">王雪名</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-413624">
            <p>老师，您好！有个很大的疑问！授权码模式有个疑问，client将用户导向认证服务器这一步，如果client将用户导向了一个自己的认证服务器，用户在那个页面去登录授权，那client就可以截获用户的账号密码，然后client拿着用户的账号密码再导向真实的认证服务器去认证获取授权，那client就可以为所欲为了。怎么防止client导向的认证服务是真实的认证服务呢？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 20, 2019  4:50 PM">2019年9月20日 16:50</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-413624">#</a>
 | <a href="#comment-text" title="引用王雪名的这条留言" onclick="return CommentQuote('comment-quote-413624','王雪名');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-414921" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">王坡</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-414921">
            <p>阮一峰老师，久闻大名，此次特意因Oauth2疑惑，特意前来留名感谢，神就是神</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="December  6, 2019  3:58 PM">2019年12月 6日 15:58</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-414921">#</a>
 | <a href="#comment-text" title="引用王坡的这条留言" onclick="return CommentQuote('comment-quote-414921','王坡');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-415849" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">年轻的程序员</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-415849">
            <p>读阮大牛的一篇文章胜读十章教程</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="January 14, 2020  8:30 PM">2020年1月14日 20:30</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-415849">#</a>
 | <a href="#comment-text" title="引用年轻的程序员的这条留言" onclick="return CommentQuote('comment-quote-415849','年轻的程序员');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-416732" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">徐瑞</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-416732">
            <blockquote>
<pre>引用王雪名的发言：</pre>

<p>老师，您好！有个很大的疑问！授权码模式有个疑问，client将用户导向认证服务器这一步，如果client将用户导向了一个自己的认证服务器，用户在那个页面去登录授权，那client就可以截获用户的账号密码，然后client拿着用户的账号密码再导向真实的认证服务器去认证获取授权，那client就可以为所欲为了。怎么防止client导向的认证服务是真实的认证服务呢？</p>

</blockquote>

<p>没有办法, 你必须选择你的客户端, 并能够正确识别Authorization Server本身的地址</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March  9, 2020  9:55 PM">2020年3月 9日 21:55</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-416732">#</a>
 | <a href="#comment-text" title="引用徐瑞的这条留言" onclick="return CommentQuote('comment-quote-416732','徐瑞');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-416984" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">nothing2016</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-416984">
            <p>老师你好，请教一下，认证成功后返回的token_type的作用是什么？一般默认是bearer，是否可以自定义为abc或者不返回这个字段呢？如果自定义为abc，那么当请求数据的时候请求头部是不是就要这样携带 Authorization： abc access_token</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 21, 2020  9:26 AM">2020年3月21日 09:26</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-416984">#</a>
 | <a href="#comment-text" title="引用nothing2016的这条留言" onclick="return CommentQuote('comment-quote-416984','nothing2016');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-417124" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">你猜我是谁？</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-417124">
            <blockquote>
<pre>引用王雪名的发言：</pre>

<p>老师，您好！有个很大的疑问！授权码模式有个疑问，client将用户导向认证服务器这一步，如果client将用户导向了一个自己的认证服务器，用户在那个页面去登录授权，那client就可以截获用户的账号密码，然后client拿着用户的账号密码再导向真实的认证服务器去认证获取授权，那client就可以为所欲为了。怎么防止client导向的认证服务是真实的认证服务呢？</p>

</blockquote>

<p>- -这里没有说用账号密码去进行授权登陆啊</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="March 24, 2020  3:08 PM">2020年3月24日 15:08</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-417124">#</a>
 | <a href="#comment-text" title="引用你猜我是谁？的这条留言" onclick="return CommentQuote('comment-quote-417124','你猜我是谁？');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-418140" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">秋晨</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-418140">
            <p>授权码模式中D步骤，缺少client_secret</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May  3, 2020  3:27 PM">2020年5月 3日 15:27</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-418140">#</a>
 | <a href="#comment-text" title="引用秋晨的这条留言" onclick="return CommentQuote('comment-quote-418140','秋晨');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-418143" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">屁话一大堆</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-418143">
            <p>呵呵 阮一峰你这长篇大论 我真怀疑 你自己到底有没有学会 <br />
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May  3, 2020  6:47 PM">2020年5月 3日 18:47</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-418143">#</a>
 | <a href="#comment-text" title="引用屁话一大堆的这条留言" onclick="return CommentQuote('comment-quote-418143','屁话一大堆');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-418459" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Suriy</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-418459">
            <p>请问源码在哪可以看，连接没有源码部分啊</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="May 22, 2020  2:00 PM">2020年5月22日 14:00</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-418459">#</a>
 | <a href="#comment-text" title="引用Suriy的这条留言" onclick="return CommentQuote('comment-quote-418459','Suriy');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-418831" class="comment">
    <div  class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">lubberland</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-418831">
            <p>一直没搞明白refresh_token存在的意义<br />
各位有何高见？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="June  1, 2020 12:21 PM">2020年6月 1日 12:21</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-418831">#</a>
 | <a href="#comment-text" title="引用lubberland的这条留言" onclick="return CommentQuote('comment-quote-418831','lubberland');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-422319" class="comment">
    <div id="comment-last" class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">鲍勃</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-422319">
            <p>说的都懂 ，但如何去实现呢  </p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <abbr class="published" title="September 14, 2020  5:03 PM">2020年9月14日 17:03</abbr>
 | <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html#comment-422319">#</a>
 | <a href="#comment-text" title="引用鲍勃的这条留言" onclick="return CommentQuote('comment-quote-422319','鲍勃');">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    </div>
        
    


    
    
    <div class="comments-open" id="comments-open">
        <h2 class="comments-open-header">我要发表看法</h2>
        <div class="comments-open-content">

        
            <div id="comment-greeting"></div>

            <form method="post" action="http://www.ruanyifeng.com/cgi-bin/mtos/mt-comments.cgi" name="comments_form" id="comments-form" onsubmit="return pleaseWait();">
                <input type="hidden" name="static" value="1" />
                <input type="hidden" name="entry_id" value="1804" />
                <input type="hidden" name="__lang" value="en" />
                <input type="hidden" name="parent_id" value="" id="comment-parent-id" />
                <input type="hidden" name="armor" value="1" />
                <input type="hidden" name="preview" value="" />
                <input type="hidden" name="sid" value="" />
                <div id="comments-open-data">
            <div id="comments-open-text">
                    <p><label for="comment-text">您的留言
                    （HTML标签部分可用）</label></p>
                    <p><textarea id="comment-text" name="text" rows="10" cols="50"></textarea></p>
                </div>
                    <div id="comment-form-name">
                        <p><label for="comment-author">您的大名：</label></p>
                        <p><input id="comment-author" name="author" size="30" value="" />  <span class="hint"> &laquo;-必填</span></p>
                    </div>
                    <div id="comment-form-email">
                        <p><label for="comment-email">电子邮件：</label></p>
                        <p><input id="comment-email" name="email" size="30" value="" />  <span class="hint"> &laquo;-必填，不公开</span></p>
                    </div>
                    <div id="comment-form-url">
                        <p><label for="comment-url">个人网址：</label></p>
                        <p><input id="comment-url" name="url" size="30" value="" />  <span class="hint"> &laquo;-我信任你，不会填写广告链接</span></p>
                    </div>
                    <div id="comment-form-remember-me">
                        <p>
                        <label for="comment-bake-cookie">记住个人信息？</label><input type="checkbox" id="comment-bake-cookie" name="bakecookie" onclick="!this.checked?forgetMe(document.comments_form):rememberMe(document.comments_form)" value="1" accesskey="r" /></p>
                    </div>
                </div>
                    <div id="comment-form-reply" style="display:none">
                    <input type="checkbox" id="comment-reply" name="comment_reply" value="" onclick="mtSetCommentParentID()" />
                    <label for="comment-reply" id="comment-reply-label"></label>
                </div>
                <div id="comments-open-captcha"></div>
                <div id="comments-open-footer">
<div id="wait" style="display:none;">
<p><strong>正在发表您的评论，请稍候</strong></p>
<p>
<input type="text" name="percent" size="3" style="font-family:Arial; color:black;text-align:center; border-width:medium; border-style:none;">           
<input type="text" name="chart" size="46" style="font-family:Arial;font-weight:bolder; color:black; padding:0px; border-style:none;">
</p>
</div>

                    <p><input type="submit" accesskey="s" name="post" id="comment-submit" value="发表" />  <span class="hint"> &laquo;- 点击按钮</span></p>
                </div>
            </form>


        </div>
    </div>

    


</div>




                        </div>
                    </div>

                </div>
            </div>
        <script type="text/javascript" src="http://www.ruanyifeng.com/blog/js/prism.js"></script>
        <script type="text/javascript" src="/blog/checker.js"></script> 
            <div id="footer">
<div id="footer-inner">
  <div id="footer-content">

      
<!--
      <section> 
     </section>
  <p><a title="Instagram" target="_blank" href="http://instagram.com/ruanyf">Instagram</a></p>
       <p><a title="订阅" href="https://app.feedblitz.com/f/f.fbz?Sub=348868" target="_blank">邮件订阅</a></p>
  
       <h2>Feed</h2>
       <p><a title="FeedBurner" href="http://feeds.feedburner.com/ruanyifeng" target="_blank">FeedBurner</a></p>
       <p><a title="atom.xml" href="http://www.ruanyifeng.com/blog/atom.xml" target="_blank">atom.xml</a></p>
     
      <p>支付宝：<a title="支付宝" href="alipays://platformapi/startapp?appId=20000067&url=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog" target="_blank">yifeng.ruan@gmail.com</a></p>
-->

     <section>
<!--
       <h2>授权方式</h2>
       <p><a title="许可证" href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">自由转载-非商用-非衍生-保持署名</a></p>
       <h2>微信公号</h2>
       <h2>社交帐号</h2>
       <h2>联系方式</h2>
     -->
       <p><img src="https://www.wangbase.com/blogimg/asset/202001/bg2020013101.jpg" alt="微信扫描"></p>
       <p>
         <a title="微博" href="http://weibo.com/ruanyf" target="_blank">Weibo</a> | 
         <a title="Twitter" target="_blank" href="https://twitter.com/ruanyf">Twitter</a> |
         <a title="GitHub" target="_blank" href="https://github.com/ruanyf">GitHub</a>
       </p>
     
     <p>Email: <a title="电子邮件" href="mailto:yifeng.ruan@gmail.com" target="_blank">yifeng.ruan@gmail.com</a></p>
     </section>
  
  


  </div>
</div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46829782-1', 'ruanyifeng.com');
  ga('send', 'pageview');

</script>

<script type="text/javascript" src="/blog/stats.js"></script>
<script>
var supportImg = document.querySelector('#support-img');

if (supportImg && _hmt) {
  _hmt.push(['_trackEvent', 'banner', 'load']);
  supportImg.addEventListener('click', function () {
    _hmt.push(['_trackEvent', 'banner', 'click']);
  }, false);
}

var homepageImg = document.querySelector('#homepage_sponsor');
if (homepageImg && _hmt) {
  _hmt.push(['_trackEvent', 'homepage-banner', 'load']);
  homepageImg.addEventListener('click', function () {
    _hmt.push(['_trackEvent', 'homepage-banner', 'click']);
  }, false);
}
</script>


<div id="share_button_proto" style="display:none;">
<a class="bshareDiv" href="http://www.bshare.cn/share">分享按钮</a>



<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=15e016b4-0028-44f1-a40d-a3c9d9c13c28&style=10&bgcolor=#fff&bp=weixin,qqim,qzone,qqmb,sinaminiblog,fanfou,xueqiu,douban,facebook,twitter,gplus,instapaper&ssc=false"></script>
<script type="text/javascript" charset="utf-8">
bShare.addEntry({
    title: document.getElementById("page-title").innerHTML,
url:window.location.href
});
</script>
</div>

<script>
document.getElementById("share_button").innerHTML=document.getElementById("share_button_proto").innerHTML;
</script>





        </div>
    </div>
</body>
</html>